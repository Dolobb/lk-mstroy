# –°–∞–º–æ—Å–≤–∞–ª—ã ‚Äî –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

> –î–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç **–∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞**, –æ—Ç–∫—É–¥–∞ –±–µ—Ä—ë—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ, –∫–∞–∫ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è, –∏ —á—Ç–æ –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º.
> –§–∏–Ω–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞: `samosvaly-v6.html`

---

## –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–∞–∑–¥–µ–ª—ë–Ω –Ω–∞ **2 –≤–∫–ª–∞–¥–∫–∏**:

| –í–∫–ª–∞–¥–∫–∞ | –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ | –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å |
|---------|-----------|---------------|
| **üìã –ó–∞—è–≤–∫–∏** | –ö–∞—Ä—Ç–æ—á–∫–∏ –∑–∞—è–≤–æ–∫ –ø–æ –≥–æ—Ä–æ–¥–∞–º + –ì–∞–Ω—Ç—Ç-–¥–∏–∞–≥—Ä–∞–º–º–∞ | –ù–µ–¥–µ–ª—å–Ω–∞—è —Å–≤–æ–¥–∫–∞ –ø–æ –æ–±—ä–µ–∫—Ç–∞–º |
| **üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞** | –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ (–¥–µ—Ä–µ–≤–æ) | –û–≤–µ—Ä–ª–µ–π ¬´–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á—ë—Ç–∞¬ª (–ø–æ –∫–Ω–æ–ø–∫–µ) |

---

## –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ API endpoints

–ò–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –±—ç–∫–µ–Ω–¥–∞ (–î–°–¢):

| Endpoint | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-------|----------|
| `/api/dt/objects` | GET | –°–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤: `uid`, `name`, `smu` |
| `/api/dt/shift-records` | GET | –ö–ò–ü –ø–æ —Å–º–µ–Ω–∞–º: `regNumber`, `nameMO`, `objectName`, `shiftType`, `reportDate`, `workType`, `kipPct`, `movementPct`, `engineTimeSec`, `onsiteMin`, `tripsCount`, `distanceKm`, `factVolumeM3`, `requestNumbers`, `plId` |
| `/api/dt/trips?shiftRecordId=N` | GET | –†–µ–π—Å—ã: `tripNumber`, `loadingZone`, `unloadingZone`, `loadedAt`, `unloadedAt`, `durationMin` |
| `/api/dt/zone-events?vehicleId=N&date=...&shiftType=...` | GET | –ó–æ–Ω—ã: `zone_tag` (`dt_boundary`, `dt_loading`, `dt_unloading`), `enteredAt`, `exitedAt` |

**–í–∞–∂–Ω–æ:** –í—Å–µ —á–∏—Å–ª–æ–≤—ã–µ –ø–æ–ª—è –ø—Ä–∏—Ö–æ–¥—è—Ç **—Å—Ç—Ä–æ–∫–∞–º–∏** –∏–∑ PostgreSQL ‚Üí –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ `Number()`.

**–ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è API:** `trips.distanceKm`, `trips.volumeM3`, `factVolumeM3` ‚Äî –≤—Å–µ–≥–¥–∞ `null` / `0`.

**–¢–∏–ø—ã:** `shiftType`: `"shift1"` (07:30‚Äì19:30) / `"shift2"` (19:30‚Äì07:30). `workType`: `"delivery"` / `"onsite"` / `"unknown"`.

---

## 1. –í–ö–õ–ê–î–ö–ê ¬´–ó–ê–Ø–í–ö–ò¬ª

### 1.1 –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞

–ó–∞—è–≤–∫–∏ –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –ø–æ **–≥–æ—Ä–æ–¥–∞–º** (–¢–æ–±–æ–ª—å—Å–∫, –¢—é–º–µ–Ω—å, –∏ —Ç.–¥.), –≤–Ω—É—Ç—Ä–∏ –≥–æ—Ä–æ–¥–∞ ‚Äî –Ω–∞ **–ê–∫—Ç–∏–≤–Ω—ã–µ** –∏ **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ**.

| –≠–ª–µ–º–µ–Ω—Ç | –ó–Ω–∞—á–µ–Ω–∏–µ | –ò—Å—Ç–æ—á–Ω–∏–∫ |
|---------|----------|----------|
| –ù–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞ | –¢–µ–∫—Å—Ç | ‚ùì **–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ.** –í–µ—Ä–æ—è—Ç–Ω–æ –ø–æ–ª–µ –∏–∑ –∑–∞—è–≤–∫–∏ (–≥–æ—Ä–æ–¥ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –∏–ª–∏ –ø—Ä–∏–≤—è–∑–∫–∞ –∫ –æ–±—ä–µ–∫—Ç—É). –í —Ç–µ–∫—É—â–µ–º API –Ω–µ—Ç —è–≤–Ω–æ–≥–æ –ø–æ–ª—è `city`. –í–æ–∑–º–æ–∂–Ω–æ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –∏–∑ `objectName` –∏–ª–∏ –∏–∑ –Ω–æ–≤–æ–≥–æ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞. |
| –ë–µ–π–¥–∂ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º | –ß–∏—Å–ª–æ –∑–∞—è–≤–æ–∫ –≤ —ç—Ç–æ–º –≥–æ—Ä–æ–¥–µ | `COUNT(–∑–∞—è–≤–∫–∏ WHERE –≥–æ—Ä–æ–¥ = X)` |
| ¬´–ê–∫—Ç–∏–≤–Ω—ã–µ (N)¬ª | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ | `COUNT(–∑–∞—è–≤–∫–∏ WHERE –≥–æ—Ä–æ–¥ = X AND status = 'active')` |
| ¬´–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ (N)¬ª | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ | `COUNT(–∑–∞—è–≤–∫–∏ WHERE –≥–æ—Ä–æ–¥ = X AND status = 'done')` |

**‚ö†Ô∏è –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö –æ –∑–∞—è–≤–∫–∞—Ö:** –¢–µ–∫—É—â–∏–π API (`shift-records`) –æ–ø–µ—Ä–∏—Ä—É–µ—Ç –Ω–æ–º–µ—Ä–∞–º–∏ –∑–∞—è–≤–æ–∫ (`requestNumbers`), –Ω–æ **–Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–∞–º–∏—Ö –∑–∞—è–≤–∫–∞—Ö** (–º–∞—Ä—à—Ä—É—Ç, –≥—Ä—É–∑, –æ–±—ä—ë–º –ø–ª–∞–Ω–∞, –¥–∞—Ç—ã –Ω–∞—á–∞–ª–∞/–∫–æ–Ω—Ü–∞). –ù–µ–æ–±—Ö–æ–¥–∏–º **–æ—Ç–¥–µ–ª—å–Ω—ã–π endpoint –∏–ª–∏ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∑–∞—è–≤–æ–∫**.

---

### 1.2 –ö–∞—Ä—Ç–æ—á–∫–∞ –∑–∞—è–≤–∫–∏

#### –õ–µ–≤—ã–π –±–ª–æ–∫ (150px, –≤—ã—Ä–æ–≤–Ω–µ–Ω —Å —Å—Ç–æ–ª–±—Ü–æ–º ¬´–°–∞–º–æ—Å–≤–∞–ª¬ª –≤ –ì–∞–Ω—Ç—Ç–µ)

| –≠–ª–µ–º–µ–Ω—Ç | –ó–Ω–∞—á–µ–Ω–∏–µ | –ò—Å—Ç–æ—á–Ω–∏–∫ |
|---------|----------|----------|
| `–ó–∞—è–≤–∫–∞ #122699` | –ù–æ–º–µ—Ä –∑–∞—è–≤–∫–∏ | ‚ùì **–ò–∑ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ –∑–∞—è–≤–æ–∫.** –í API `shift-records` –µ—Å—Ç—å `requestNumbers` (—Å—Ç—Ä–æ–∫–∞), –Ω–æ —ç—Ç–æ —Ç–æ–ª—å–∫–æ –Ω–æ–º–µ—Ä. |
| –ú–∞—Ä—à—Ä—É—Ç (–º–∏–Ω–∏) | –¢–µ–∫—Å—Ç ¬´–ë–∞–∑–∞ –ú–û36 ‚Üí –†-404 –¢–æ–±–æ–ª—å—Å–∫¬ª | ‚ùì **–ò–∑ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ –∑–∞—è–≤–æ–∫.** –§–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ `{—Ç–æ—á–∫–∞ –ø–æ–≥—Ä—É–∑–∫–∏} ‚Üí {—Ç–æ—á–∫–∞ –≤—ã–≥—Ä—É–∑–∫–∏}`. |

#### –ü—Ä–∞–≤—ã–π –±–ª–æ–∫ (—Å –ø—Ä–æ–≥—Ä–µ—Å—Å-–∑–∞–ª–∏–≤–∫–æ–π)

**–ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä (—Ñ–æ–Ω–æ–≤–∞—è –∑–∞–ª–∏–≤–∫–∞):**

| –≠–ª–µ–º–µ–Ω—Ç | –ó–Ω–∞—á–µ–Ω–∏–µ | –†–∞—Å—á—ë—Ç |
|---------|----------|--------|
| `pct` ‚Äî –ø—Ä–æ—Ü–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è | 0‚Äì100% | ‚ùì **–õ–æ–≥–∏–∫–∞ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ —Ç–æ—á–Ω–æ.** –í–∞—Ä–∏–∞–Ω—Ç—ã: `factVolumeM3 / planVolumeM3 * 100` (–Ω–æ `factVolumeM3` –≤—Å–µ–≥–¥–∞ 0 –≤ API). –ò–ª–∏ `SUM(tripsCount) / planTrips * 100`. –ò–ª–∏ –ø–æ —Ç–æ–Ω–Ω–∞–∂—É. **–ù—É–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, —á—Ç–æ —Å—á–∏—Ç–∞–µ—Ç—Å—è ¬´–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º¬ª –∑–∞—è–≤–∫–∏ –∏ –æ—Ç–∫—É–¥–∞ –±–µ—Ä—ë—Ç—Å—è –ø–ª–∞–Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.** |
| –ë–µ–π–¥–∂ ¬´65%¬ª | –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö | = `pct` |
| –ë–µ–π–¥–∂ ¬´‚óè —Ä–∞–±–æ—Ç–∞¬ª / ¬´‚úì –≥–æ—Ç–æ–≤–æ¬ª | –°—Ç–∞—Ç—É—Å | ‚ùì –û—Ç–∫—É–¥–∞ –±–µ—Ä—ë—Ç—Å—è —Å—Ç–∞—Ç—É—Å `active/done`? –í–æ–∑–º–æ–∂–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏: –µ—Å–ª–∏ `pct >= 100` ‚Üí done. –ò–ª–∏ —Ä—É—á–Ω–æ–π —Å—Ç–∞—Ç—É—Å –∏–∑ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞. |

**–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∑–∞—è–≤–∫–∏:**

| –ü–æ–ª–µ UI | –ö–ª—é—á | –ò—Å—Ç–æ—á–Ω–∏–∫ | –†–∞—Å—á—ë—Ç |
|---------|------|----------|--------|
| **–î–∞—Ç—ã** | `dateFrom`, `dateTo` | ‚ùì –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∑–∞—è–≤–æ–∫ | –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –∏ –ø–ª–∞–Ω–∏—Ä—É–µ–º–∞—è –¥–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ä–∞–±–æ—Ç |
| **–†–∞—Å—Å—Ç.** | `dist` | ‚ùì –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∑–∞—è–≤–æ–∫ | –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞ –≤ –∫–º. –í API `trips.distanceKm` –≤—Å–µ–≥–¥–∞ 0. –í–æ–∑–º–æ–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è. |
| **–í—Ä–µ–º—è** | `time` | ‚ùì –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∑–∞—è–≤–æ–∫ | –†–∞—Å—á—ë—Ç–Ω–æ–µ –≤—Ä–µ–º—è –≤ –ø—É—Ç–∏. –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ ‚Äî –≤—Ä—É—á–Ω—É—é –∏–ª–∏ –∏–∑ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏. |
| **–¢–°** | `ts` | ‚ùì | –§–æ—Ä–º–∞—Ç ¬´X/Y¬ª ‚Äî –Ω–∞–∑–Ω–∞—á–µ–Ω–æ/–¥–æ—Å—Ç—É–ø–Ω–æ? **–õ–æ–≥–∏–∫–∞ –Ω–µ –æ–±—Å—É–∂–¥–∞–ª–∞—Å—å.** |
| **–ü–õ** | `pl` | ‚ùì | –ü—É—Ç–µ–≤–æ–π –ª–∏—Å—Ç. `plId` –µ—Å—Ç—å –≤ `shift-records`. –ß–∏—Å–ª–æ –ü–õ? |
| **–ì—Ä—É–∑** | `cargo` | ‚ùì –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∑–∞—è–≤–æ–∫ | –ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–∑–∞ |
| **–í—Å–µ–≥–æ —Ç–æ–Ω–Ω** | `totalWt` | ‚ùì | –ü–ª–∞–Ω–æ–≤—ã–π –æ–±—ä—ë–º –ø–µ—Ä–µ–≤–æ–∑–∫–∏ –≤ —Ç–æ–Ω–Ω–∞—Ö –ø–æ –∑–∞—è–≤–∫–µ. **–ù–µ—Ç –≤ —Ç–µ–∫—É—â–µ–º API.** |
| **–í—Å–µ–≥–æ –º¬≥** | `totalVol` | ‚ùì | –ü–ª–∞–Ω–æ–≤—ã–π –æ–±—ä—ë–º –≤ –º¬≥ –ø–æ –∑–∞—è–≤–∫–µ. **–ù–µ—Ç –≤ —Ç–µ–∫—É—â–µ–º API.** |
| **–û–±—ä–µ–∫—Ç –∑–∞—Ç—Ä–∞—Ç** | `obj` | –í–æ–∑–º–æ–∂–Ω–æ `objectName` –∏–∑ `shift-records` | –ü—Ä–∏–≤—è–∑–∫–∞ –∑–∞—è–≤–∫–∏ –∫ –æ–±—ä–µ–∫—Ç—É —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞ |
| **—Ç/—Ä–µ–π—Å** | `wt` | ‚ùì | –¢–æ–Ω–Ω–∞–∂ –Ω–∞ 1 —Ä–µ–π—Å. –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∑–∞—è–≤–æ–∫ –∏–ª–∏ `totalWt / planTrips`. |
| **–º¬≥/—Ä–µ–π—Å** | `vol` | ‚ùì | –û–±—ä—ë–º –Ω–∞ 1 —Ä–µ–π—Å. –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ. |

---

### 1.3 –ì–∞–Ω—Ç—Ç-–¥–∏–∞–≥—Ä–∞–º–º–∞ (—Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ–¥ –∫–∞—Ä—Ç–æ—á–∫–æ–π)

–¢–∞–±–ª–∏—Ü–∞: **—Å—Ç—Ä–æ–∫–∏** = —Å–∞–º–æ—Å–≤–∞–ª—ã, **—Å—Ç–æ–ª–±—Ü—ã** = –¥–∞—Ç—ã √ó 2 —Å–º–µ–Ω—ã.

| –≠–ª–µ–º–µ–Ω—Ç | –ó–Ω–∞—á–µ–Ω–∏–µ | –ò—Å—Ç–æ—á–Ω–∏–∫ / —Ä–∞—Å—á—ë—Ç |
|---------|----------|-------------------|
| –°—Ç–æ–ª–±–µ—Ü ¬´–°–∞–º–æ—Å–≤–∞–ª¬ª | –ú–∞—Ä–∫–∞ + –≥–æ—Å–Ω–æ–º–µ—Ä | ‚ùì –ò–∑ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ –∑–∞—è–≤–æ–∫: –∫–∞–∫–∏–µ –º–∞—à–∏–Ω—ã –Ω–∞–∑–Ω–∞—á–µ–Ω—ã. –í API `shift-records` –µ—Å—Ç—å `regNumber` –∏ `nameMO`. |
| `[N]` –ø–æ—Å–ª–µ –∏–º–µ–Ω–∏ –º–∞—à–∏–Ω—ã | –û–±—â–µ–µ –∫–æ–ª-–≤–æ —Ä–µ–π—Å–æ–≤ —ç—Ç–æ–π –º–∞—à–∏–Ω—ã –ø–æ –∑–∞—è–≤–∫–µ | `SUM(tripsCount)` –ø–æ –≤—Å–µ–º shift-records —ç—Ç–æ–π –º–∞—à–∏–Ω—ã –≤ —Ä–∞–º–∫–∞—Ö —ç—Ç–æ–π –∑–∞—è–≤–∫–∏ |
| –ó–∞–≥–æ–ª–æ–≤–∫–∏ –¥–∞—Ç | DD.MM | –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∏–∑ `dateFrom` –∑–∞—è–≤–∫–∏, –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –¥–Ω–µ–π |
| ¬´1¬ª –∏ ¬´2¬ª –ø–æ–¥ –¥–∞—Ç–æ–π | –ù–æ–º–µ—Ä —Å–º–µ–Ω—ã | shift1 / shift2 |
| **–ß–∏—Å–ª–æ –≤ —è—á–µ–π–∫–µ** | –ö–æ–ª-–≤–æ —Ä–µ–π—Å–æ–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–∞—à–∏–Ω—ã –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Å–º–µ–Ω—É | `tripsCount` –∏–∑ `shift-records` WHERE `regNumber` = –º–∞—à–∏–Ω–∞ AND `reportDate` = –¥–∞—Ç–∞ AND `shiftType` = —Å–º–µ–Ω–∞ AND `requestNumbers` CONTAINS –Ω–æ–º–µ—Ä_–∑–∞—è–≤–∫–∏ |
| –ü—É—Å—Ç–∞—è —è—á–µ–π–∫–∞ | –ú–∞—à–∏–Ω–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞ | `tripsCount = 0` –∏–ª–∏ –Ω–µ—Ç –∑–∞–ø–∏—Å–∏ |

**–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Å–∫—Ä–æ–ª–ª:** –ï—Å–ª–∏ –∑–∞—è–≤–∫–∞ > ~10 –¥–Ω–µ–π, —Ç–∞–±–ª–∏—Ü–∞ —à–∏—Ä–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ ‚Üí —Å–∫—Ä–æ–ª–ª.

---

## 2. –ë–û–ö–û–í–ê–Ø –ü–ê–ù–ï–õ–¨ ¬´–ù–ï–î–ï–õ–¨–ù–ê–Ø –°–í–û–î–ö–ê¬ª (–≤–∫–ª–∞–¥–∫–∞ –ó–∞—è–≤–∫–∏)

### 2.1 –ù–∞–≤–∏–≥–∞—Ü–∏—è –Ω–µ–¥–µ–ª—å

| –≠–ª–µ–º–µ–Ω—Ç | –ó–Ω–∞—á–µ–Ω–∏–µ | –†–∞—Å—á—ë—Ç |
|---------|----------|--------|
| –ó–∞–≥–æ–ª–æ–≤–æ–∫ ¬´17.02 ‚Äî 23.02¬ª | –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ ‚Äî –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –Ω–µ–¥–µ–ª–∏ | –¢–µ–∫—É—â–∞—è –Ω–µ–¥–µ–ª—è: `getMonday(today)` .. `+6 –¥–Ω–µ–π`. –°—Ç—Ä–µ–ª–∫–∏ ‚Üê ‚Üí —Å–º–µ—â–∞—é—Ç –Ω–∞ ¬±7 –¥–Ω–µ–π. |
| –ü–æ–¥–ø–∏—Å—å ¬´–ø–Ω ‚Äî –≤—Å ¬∑ —Ç–µ–∫—É—â–∞—è¬ª | –¢–µ–∫—Å—Ç | –ï—Å–ª–∏ offset = 0 ‚Üí ¬´—Ç–µ–∫—É—â–∞—è¬ª, –∏–Ω–∞—á–µ ¬´+N –Ω–µ–¥.¬ª / ¬´-N –Ω–µ–¥.¬ª |

**–î–∞–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –Ω–µ–¥–µ–ª–µ** ‚Äî –≤—Å–µ —á–∏—Å–ª–∞ –Ω–∏–∂–µ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è.

### 2.2 –ë–ª–æ–∫–∏ –ø–æ –æ–±—ä–µ–∫—Ç–∞–º

–í–µ—Ä—Ö–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å ‚Äî **–æ–±—ä–µ–∫—Ç—ã** (–≥–æ—Ä–æ–¥–∞): –¢–æ–±–æ–ª—å—Å–∫, –¢—é–º–µ–Ω—å, –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥, –°–∏–Ω–≥–∞–ø–∞–π.

‚ùì **–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ:** —á—Ç–æ –∏–º–µ–Ω–Ω–æ —Å—á–∏—Ç–∞–µ—Ç—Å—è ¬´–æ–±—ä–µ–∫—Ç–æ–º¬ª –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏. –í–µ—Ä–æ—è—Ç–Ω–æ —ç—Ç–æ `objectName` –∏–∑ `shift-records`, –Ω–æ –æ–Ω –º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª–µ–µ –≥—Ä–∞–Ω—É–ª—è—Ä–Ω—ã–º —á–µ–º –≥–æ—Ä–æ–¥. –ù—É–∂–µ–Ω –º–∞–ø–ø–∏–Ω–≥ object ‚Üí –≥–æ—Ä–æ–¥.

–ö–∞–∂–¥—ã–π –±–ª–æ–∫ —Å–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è.

#### KPI-–∫–∞—Ä—Ç–æ—á–∫–∏

| –ö–∞—Ä—Ç–æ—á–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ | –†–∞—Å—á—ë—Ç | –î–µ–ª—å—Ç–∞ |
|----------|----------|--------|--------|
| **–ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞—è–≤–∫–∏** | –ß–∏—Å–ª–æ | `COUNT(–∑–∞—è–≤–∫–∏ WHERE –æ–±—ä–µ–∫—Ç = X AND status = 'active')` –≤ —Ä–∞–º–∫–∞—Ö –≤—ã–±—Ä–∞–Ω–Ω–æ–π –Ω–µ–¥–µ–ª–∏ | `—Ç–µ–∫—É—â–∞—è_–Ω–µ–¥–µ–ª—è - –ø—Ä–µ–¥—ã–¥—É—â–∞—è_–Ω–µ–¥–µ–ª—è` |
| **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞—è–≤–∫–∏** | –ß–∏—Å–ª–æ | `COUNT(–∑–∞—è–≤–∫–∏ WHERE –æ–±—ä–µ–∫—Ç = X AND status = 'done')` ‚Äî –∑–∞–≤–µ—Ä—à–∏–ª–∏—Å—å –Ω–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ | `—Ç–µ–∫—É—â–∞—è - –ø—Ä–µ–¥—ã–¥—É—â–∞—è` |
| **–°–∞–º–æ—Å–≤–∞–ª–æ–≤** | –ß–∏—Å–ª–æ | `COUNT(DISTINCT regNumber)` –∏–∑ `shift-records` WHERE `objectName` ‚àà –æ–±—ä–µ–∫—Ç AND `reportDate` ‚àà –Ω–µ–¥–µ–ª—è | `—Ç–µ–∫—É—â–∞—è - –ø—Ä–µ–¥—ã–¥—É—â–∞—è` |
| **–†–µ–π—Å–æ–≤** | –ß–∏—Å–ª–æ | `SUM(tripsCount)` –∏–∑ `shift-records` WHERE –æ–±—ä–µ–∫—Ç AND –Ω–µ–¥–µ–ª—è | ‚Äî |
| **–û–±—ä—ë–º —Ç** | –ß–∏—Å–ª–æ | ‚ùì **–ü—Ä–æ–±–ª–µ–º–∞:** `factVolumeM3` –≤—Å–µ–≥–¥–∞ 0 –≤ API. –ï—Å–ª–∏ —Å—á–∏—Ç–∞—Ç—å —á–µ—Ä–µ–∑ –∫–æ–ª-–≤–æ —Ä–µ–π—Å–æ–≤ √ó —Ç–æ–Ω–Ω–∞–∂/—Ä–µ–π—Å –∏–∑ –∑–∞—è–≤–∫–∏ ‚Äî –Ω—É–∂–Ω–∞ —Å–≤—è–∑–∫–∞. **–õ–æ–≥–∏–∫–∞ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞.** |

#### –ú–∞—à–∏–Ω—ã –≤ —Ä–µ–º–æ–Ω—Ç–µ

| –≠–ª–µ–º–µ–Ω—Ç | –ó–Ω–∞—á–µ–Ω–∏–µ | –ò—Å—Ç–æ—á–Ω–∏–∫ |
|---------|----------|----------|
| –°—á—ë—Ç—á–∏–∫ | –ö–æ–ª-–≤–æ –º–∞—à–∏–Ω –≤ —Ä–µ–º–æ–Ω—Ç–µ | ‚ùì **–ù–µ—Ç –≤ —Ç–µ–∫—É—â–µ–º API.** –ù—É–∂–Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞/endpoint –¥–ª—è —Å—Ç–∞—Ç—É—Å–æ–≤ —Ä–µ–º–æ–Ω—Ç–∞. |
| –ú–∞—Ä–∫–∞ + –≥–æ—Å–Ω–æ–º–µ—Ä | –¢–µ–∫—Å—Ç | –ò–∑ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ –¢–° |
| –ü—Ä–∏—á–∏–Ω–∞ —Ä–µ–º–æ–Ω—Ç–∞ | –¢–µ–∫—Å—Ç | ‚ùì –ò–∑ —Ç–∞–±–ª–∏—Ü—ã —Ä–µ–º–æ–Ω—Ç–æ–≤: ¬´—Ä–µ–º–æ–Ω—Ç —Ö–æ–¥–æ–≤–æ–π —á–∞—Å—Ç–∏¬ª, ¬´–ø–æ–ª–Ω–æ–µ –¢–û¬ª, ¬´—Ä–µ–º–æ–Ω—Ç –ø–æ—Å–ª–µ –î–¢–ü¬ª |
| –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ | DD.MM | ‚ùì –ò–∑ —Ç–∞–±–ª–∏—Ü—ã —Ä–µ–º–æ–Ω—Ç–æ–≤ |
| –î–∞—Ç–∞ –≤—ã—Ö–æ–¥–∞ | DD.MM | ‚ùì –ò–∑ —Ç–∞–±–ª–∏—Ü—ã —Ä–µ–º–æ–Ω—Ç–æ–≤ (–º–æ–∂–µ—Ç –±—ã—Ç—å –ø–ª–∞–Ω–æ–≤–∞—è) |
| –¶–≤–µ—Ç –ø–æ–ª–æ—Å–∫–∏ | –ö—Ä–∞—Å–Ω–∞—è / –û—Ä–∞–Ω–∂–µ–≤–∞—è | `type = 'repair'` ‚Üí –∫—Ä–∞—Å–Ω–∞—è, `type = 'maintenance'` ‚Üí –æ—Ä–∞–Ω–∂–µ–≤–∞—è |

**‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –Ω–æ–≤—ã–π endpoint:** `GET /api/dt/repairs` –∏–ª–∏ –∞–Ω–∞–ª–æ–≥.

#### –ö—Ä—É–≥–æ–≤—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã (–ø–æ —Å–º–µ–Ω–∞–º)

| –°–µ–≥–º–µ–Ω—Ç | –ó–Ω–∞—á–µ–Ω–∏–µ | –†–∞—Å—á—ë—Ç |
|---------|----------|--------|
| **–ó–µ–ª—ë–Ω—ã–π ‚Äî ¬´–î–≤–∏–∂–µ–Ω–∏–µ¬ª** | % –≤—Ä–µ–º–µ–Ω–∏ –≤ –¥–≤–∏–∂–µ–Ω–∏–∏ –æ—Ç –æ–±—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–±–æ—Ç—ã | –í–µ—Ä–æ—è—Ç–Ω–æ `movementPct` –∏–∑ `shift-records`, —É—Å—Ä–µ–¥–Ω—ë–Ω–Ω—ã–π –ø–æ –≤—Å–µ–º –º–∞—à–∏–Ω–∞–º –æ–±—ä–µ–∫—Ç–∞ –∑–∞ –Ω–µ–¥–µ–ª—é: `AVG(movementPct)` WHERE –æ–±—ä–µ–∫—Ç AND `shiftType` = N AND –Ω–µ–¥–µ–ª—è |
| **–ö—Ä–∞—Å–Ω—ã–π ‚Äî ¬´–°—Ç–æ—è–Ω–∫–∞¬ª** | % –≤—Ä–µ–º–µ–Ω–∏ —Å—Ç–æ—è–Ω–∫–∏ | `100 - movementPct`. –ò–ª–∏ –º–æ–∂–µ—Ç —Å—á–∏—Ç–∞—Ç—å—Å—è –∏–∑ zone-events (–≤—Ä–µ–º—è –≤ –∑–æ–Ω–∞—Ö `dt_loading` + `dt_unloading` ‚àí –≤—Ä–µ–º—è –¥–≤–∏–∂–µ–Ω–∏—è). **–¢–æ—á–Ω–∞—è –ª–æ–≥–∏–∫–∞ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞.** |
| 100% | –û–±—â–µ–µ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã —Å–º–µ–Ω—ã | ‚ùì `engineTimeSec`? –ò–ª–∏ –≤—Ä–µ–º—è –æ—Ç –Ω–∞—á–∞–ª–∞ –¥–æ –∫–æ–Ω—Ü–∞ —Å–º–µ–Ω—ã (12 —á–∞—Å–æ–≤)? |

**–î–ª—è 1-–π —Å–º–µ–Ω—ã:** —Ñ–∏–ª—å—Ç—Ä `shiftType = 'shift1'`
**–î–ª—è 2-–π —Å–º–µ–Ω—ã:** —Ñ–∏–ª—å—Ç—Ä `shiftType = 'shift2'`

–ï—Å–ª–∏ –º–∞—à–∏–Ω–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞ –≤–æ 2-—é —Å–º–µ–Ω—É ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º ¬´‚Äî¬ª.

#### –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ —à–∫–∞–ª—ã

| –®–∫–∞–ª–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ | –†–∞—Å—á—ë—Ç |
|-------|----------|--------|
| **–ö–ò–ü** | % | `AVG(kipPct)` –∏–∑ `shift-records` WHERE –æ–±—ä–µ–∫—Ç AND –Ω–µ–¥–µ–ª—è (–≤—Å–µ —Å–º–µ–Ω—ã) |
| **–†–µ–π—Å—ã / –ø–ª–∞–Ω** | X / Y (Z%) | X = `SUM(tripsCount)` –∑–∞ –Ω–µ–¥–µ–ª—é. Y = ‚ùì **–ü–ª–∞–Ω —Ä–µ–π—Å–æ–≤ –∑–∞ –Ω–µ–¥–µ–ª—é.** –£–ø–æ–º—è–Ω—É—Ç–æ: ¬´–ø–ª–∞–Ω —Ä–µ–π—Å–æ–≤ –≤ –¥–µ–Ω—å √ó 7¬ª. **–û—Ç–∫—É–¥–∞ –±–µ—Ä—ë—Ç—Å—è –ø–ª–∞–Ω —Ä–µ–π—Å–æ–≤ –≤ –¥–µ–Ω—å ‚Äî –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ.** –ü–æ–∫–∞ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä. Z = `X / Y * 100` |

#### –í—ã–ø–∞–¥–∞—é—â–µ–µ ¬´–ü–æ –º–∞—à–∏–Ω–∞–º¬ª

| –≠–ª–µ–º–µ–Ω—Ç | –ó–Ω–∞—á–µ–Ω–∏–µ | –†–∞—Å—á—ë—Ç |
|---------|----------|--------|
| –ù–∞–∑–≤–∞–Ω–∏–µ –º–∞—à–∏–Ω—ã | –ú–∞—Ä–∫–∞ + –≥–æ—Å–Ω–æ–º–µ—Ä | `regNumber` + `nameMO` |
| –®–∫–∞–ª–∞ —Ä–µ–π—Å–æ–≤ | done / plan | done = `SUM(tripsCount)` WHERE `regNumber` = X AND –æ–±—ä–µ–∫—Ç AND –Ω–µ–¥–µ–ª—è. plan = ‚ùì **–ù–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω. –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –ø–ª–∞–Ω–∞ —Ä–µ–π—Å–æ–≤.** |
| –ü—Ä–æ—Ü–µ–Ω—Ç –∑–∞–ª–∏–≤–∫–∏ | % | `done / plan * 100` |

---

## 3. –í–ö–õ–ê–î–ö–ê ¬´–ê–ù–ê–õ–ò–¢–ò–ö–ê¬ª

### 3.1 –§–∏–ª—å—Ç—Ä—ã (—à–∞–ø–∫–∞)

| –§–∏–ª—å—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –í–ª–∏—è–Ω–∏–µ |
|--------|----------|---------|
| **–ü–µ—Ä–∏–æ–¥** | –ù–µ–¥–µ–ª—è / –ú–µ—Å—è—Ü | –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç |
| **–î–∞—Ç—ã** | from ‚Äî to | –§–∏–ª—å—Ç—Ä—É–µ—Ç `reportDate` –≤ `shift-records` |
| **–°–º–µ–Ω–∞** | –í—Å–µ / 1-—è / 2-—è | –§–∏–ª—å—Ç—Ä—É–µ—Ç `shiftType` –≤ `shift-records` |
| **–û–±—ä–µ–∫—Ç** | –í—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ | –§–∏–ª—å—Ç—Ä—É–µ—Ç `objectName`. –°–ø–∏—Å–æ–∫ –∏–∑ `GET /api/dt/objects` |

### 3.2 –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ (–¥–µ—Ä–µ–≤–æ)

#### –£—Ä–æ–≤–µ–Ω—å 0 ‚Äî –ú–∞—à–∏–Ω–∞ (—Å–≤—ë—Ä–Ω—É—Ç–æ–µ)

| –°—Ç–æ–ª–±–µ—Ü | –ó–Ω–∞—á–µ–Ω–∏–µ | –†–∞—Å—á—ë—Ç |
|---------|----------|--------|
| **–¢–° / –ó–∞—è–≤–∫–∞ / –î–µ–Ω—å** | –ú–∞—Ä–∫–∞ –º–æ–¥–µ–ª–∏ | `nameMO` –∏–∑ `shift-records` |
| **–ì–æ—Å.‚Ññ** | –ì–æ—Å–Ω–æ–º–µ—Ä | `regNumber` –∏–∑ `shift-records` |
| **–ë–µ–π–¥–∂ ¬´N –∑–∞—è–≤.¬ª** | –ö–æ–ª-–≤–æ –∑–∞—è–≤–æ–∫ —É –º–∞—à–∏–Ω—ã | `COUNT(DISTINCT requestNumbers)` –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥ |
| **‚Ññ –∑–∞—è–≤–∫–∏** (–≤ —Å—Ç–æ–ª–±—Ü–µ) | –ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–æ–≤ | `GROUP_CONCAT(DISTINCT requestNumbers)` |
| **–û–±—ä–µ–∫—Ç** (–≤ —Å—Ç–æ–ª–±—Ü–µ) | –ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ | `GROUP_CONCAT(DISTINCT objectName)` |
| **–†–µ–π—Å—ã** | –°—É–º–º–∞ —Ä–µ–π—Å–æ–≤ | `SUM(tripsCount)` –ø–æ –≤—Å–µ–º –∑–∞–ø–∏—Å—è–º –º–∞—à–∏–Ω—ã –∑–∞ –ø–µ—Ä–∏–æ–¥ |
| **–û–±—ä—ë–º** | –§–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –æ–±—ä—ë–º | ‚ùì `SUM(factVolumeM3)` ‚Äî –Ω–æ –≤—Å–µ–≥–¥–∞ 0. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: `SUM(tripsCount) √ó –æ–±—ä—ë–º_—Ä–µ–π—Å–∞_–∏–∑_–∑–∞—è–≤–∫–∏`. **–ù—É–∂–Ω–∞ —Å–≤—è–∑–∫–∞.** |
| **–û—Å—Ç.** | –û—Å—Ç–∞—Ç–æ–∫ | `plan_volume - fact_volume`. ‚ùì –ü–ª–∞–Ω–æ–≤—ã–π –æ–±—ä—ë–º –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω. |
| **–ö–ò–ü 1 —Å–º–µ–Ω–∞** | –°—Ä–µ–¥–Ω–∏–π –ö–ò–ü% | `AVG(kipPct)` WHERE `shiftType='shift1'` –∑–∞ –ø–µ—Ä–∏–æ–¥ |
| **–î–≤–∏–∂. 1 —Å–º–µ–Ω–∞** | –°—Ä–µ–¥–Ω–∏–π % –¥–≤–∏–∂–µ–Ω–∏—è | `AVG(movementPct)` WHERE `shiftType='shift1'` –∑–∞ –ø–µ—Ä–∏–æ–¥ |
| **–ö–ò–ü 2 —Å–º–µ–Ω–∞** | –°—Ä–µ–¥–Ω–∏–π –ö–ò–ü% | `AVG(kipPct)` WHERE `shiftType='shift2'` –∑–∞ –ø–µ—Ä–∏–æ–¥ |
| **–î–≤–∏–∂. 2 —Å–º–µ–Ω–∞** | –°—Ä–µ–¥–Ω–∏–π % –¥–≤–∏–∂–µ–Ω–∏—è | `AVG(movementPct)` WHERE `shiftType='shift2'` –∑–∞ –ø–µ—Ä–∏–æ–¥ |

**–¶–≤–µ—Ç–æ–≤–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –ö–ò–ü/–î–≤–∏–∂:** `‚â•75 ‚Üí –∑–µ–ª—ë–Ω—ã–π`, `50‚Äì74 ‚Üí –æ—Ä–∞–Ω–∂–µ–≤—ã–π`, `<50 ‚Üí –∫—Ä–∞—Å–Ω—ã–π`.

#### –£—Ä–æ–≤–µ–Ω—å 1 ‚Äî –ó–∞—è–≤–∫–∞ (—Ä–∞—Å–∫—Ä—ã—Ç–∏–µ –º–∞—à–∏–Ω—ã)

| –°—Ç–æ–ª–±–µ—Ü | –ó–Ω–∞—á–µ–Ω–∏–µ | –†–∞—Å—á—ë—Ç |
|---------|----------|--------|
| **–ú–µ—Ç–∫–∞** | `#140021 ¬∑ –í–æ—Å—Ç. –æ–±—ä–µ–∑–¥` | `requestNumbers` + `objectName` |
| **–ë–µ–π–¥–∂ ¬´N –¥–Ω.¬ª** | –ö–æ–ª-–≤–æ –¥–Ω–µ–π | `COUNT(DISTINCT reportDate)` WHERE `regNumber` = X AND `requestNumbers` CONTAINS –∑–∞—è–≤–∫–∞ |
| **–†–µ–π—Å—ã** | –†–µ–π—Å—ã –ø–æ –∑–∞—è–≤–∫–µ | `SUM(tripsCount)` WHERE –º–∞—à–∏–Ω–∞ AND –∑–∞—è–≤–∫–∞ AND –ø–µ—Ä–∏–æ–¥ |
| **–û–±—ä—ë–º** | –§–∞–∫—Ç | –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ —É—Ä–æ–≤–Ω—é 0, –≤ —Ä–∞–∑—Ä–µ–∑–µ –∑–∞—è–≤–∫–∏ |
| **–û—Å—Ç.** | –û—Å—Ç–∞—Ç–æ–∫ | `plan - fact` –ø–æ –∑–∞—è–≤–∫–µ |
| **–ö–ò–ü / –î–≤–∏–∂.** | –°—Ä–µ–¥–Ω–∏–µ | `AVG(kipPct)`, `AVG(movementPct)` ‚Äî –∑–∞ –≤—Å–µ –¥–Ω–∏ —ç—Ç–æ–π –º–∞—à–∏–Ω—ã –ø–æ —ç—Ç–æ–π –∑–∞—è–≤–∫–µ |

**–°–≤—è–∑–∫–∞ –º–∞—à–∏–Ω–∞ ‚Üí –∑–∞—è–≤–∫–∞:** `shift-records.requestNumbers` —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–æ–º–µ—Ä(–∞) –∑–∞—è–≤–æ–∫. –ï—Å–ª–∏ –º–∞—à–∏–Ω–∞ –∑–∞ —Å–º–µ–Ω—É —Ä–∞–±–æ—Ç–∞–ª–∞ –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –∑–∞—è–≤–∫–∞–º ‚Äî –∑–∞–ø–∏—Å—å –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–æ–º–µ—Ä–æ–≤. ‚ùì **–ù—É–∂–Ω–æ —É—Ç–æ—á–Ω–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç: –º–∞—Å—Å–∏–≤, —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é, –∏–ª–∏ –æ–¥–Ω–∞ –∑–∞–ø–∏—Å—å –Ω–∞ –∑–∞—è–≤–∫—É.**

#### –£—Ä–æ–≤–µ–Ω—å 2 ‚Äî –î–µ–Ω—å (—Ä–∞—Å–∫—Ä—ã—Ç–∏–µ –∑–∞—è–≤–∫–∏)

| –°—Ç–æ–ª–±–µ—Ü | –ó–Ω–∞—á–µ–Ω–∏–µ | –†–∞—Å—á—ë—Ç |
|---------|----------|--------|
| **–ú–µ—Ç–∫–∞** | `16.02` | `reportDate` |
| **–ë–µ–π–¥–∂ ¬´2 —Å–º.¬ª** | –ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–ª –≤ –æ–±–µ —Å–º–µ–Ω—ã | `COUNT(DISTINCT shiftType)` WHERE –º–∞—à–∏–Ω–∞ AND –∑–∞—è–≤–∫–∞ AND –¥–∞—Ç–∞ > 1 |
| **–†–µ–π—Å—ã** | –ó–∞ –¥–µ–Ω—å | `SUM(tripsCount)` WHERE –º–∞—à–∏–Ω–∞ AND –∑–∞—è–≤–∫–∞ AND –¥–∞—Ç–∞ (–æ–±–µ —Å–º–µ–Ω—ã) |
| **–ö–ò–ü 1 / –î–≤–∏–∂. 1** | –ó–Ω–∞—á–µ–Ω–∏—è | `kipPct`, `movementPct` –∏–∑ –∑–∞–ø–∏—Å–∏ WHERE `shiftType='shift1'` AND –¥–∞—Ç–∞ |
| **–ö–ò–ü 2 / –î–≤–∏–∂. 2** | –ó–Ω–∞—á–µ–Ω–∏—è | `kipPct`, `movementPct` –∏–∑ –∑–∞–ø–∏—Å–∏ WHERE `shiftType='shift2'` AND –¥–∞—Ç–∞ |

#### –£—Ä–æ–≤–µ–Ω—å 3 ‚Äî –°–º–µ–Ω–∞ ‚Üí –†–µ–π—Å—ã (—Ä–∞—Å–∫—Ä—ã—Ç–∏–µ –¥–Ω—è)

–ü—Ä–∏ —Ä–∞—Å–∫—Ä—ã—Ç–∏–∏ –¥–Ω—è –ø–æ—è–≤–ª—è–µ—Ç—Å—è **–≤–ª–æ–∂–µ–Ω–Ω–∞—è –ø–æ–¥—Ç–∞–±–ª–∏—Ü–∞ —Ä–µ–π—Å–æ–≤** —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —Å—Ç–æ–ª–±—Ü–∞–º–∏.

**–ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø–æ–¥—Ç–∞–±–ª–∏—Ü—ã:** `–°–º–µ–Ω–∞ {N} ¬∑ {–¥–∞—Ç–∞} ¬∑ {–∫–æ–ª-–≤–æ —Ä–µ–π—Å–æ–≤} —Ä–µ–π—Å–æ–≤`

**–°—Ç–æ–ª–±—Ü—ã –ø–æ–¥—Ç–∞–±–ª–∏—Ü—ã:**

| –°—Ç–æ–ª–±–µ—Ü | –ë–ª–æ–∫ | –ó–Ω–∞—á–µ–Ω–∏–µ | –ò—Å—Ç–æ—á–Ω–∏–∫ |
|---------|------|----------|----------|
| **–†–µ–π—Å** | ‚Äî | –ü–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä —Ä–µ–π—Å–∞ | `tripNumber` –∏–∑ `GET /api/dt/trips?shiftRecordId=N` |
| **–ö–æ–ª-–≤–æ** | ‚Äî | –í—Å–µ–≥–¥–∞ `1` (–æ–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ = –æ–¥–∏–Ω —Ä–µ–π—Å) | –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ |
| **–ù–∞—á. —Å–º–µ–Ω—ã** | ‚Äî | –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ —Å–º–µ–Ω—ã | –¢–æ–ª—å–∫–æ –≤ –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–µ. ‚ùì –û—Ç–∫—É–¥–∞: –ø–µ—Ä–≤—ã–π `zone-event` —Ç–∏–ø–∞ `dt_boundary`? –ò–ª–∏ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ 07:30 / 19:30? |
| | **–ü–û–ì–†–£–ó–ö–ê** | | |
| **–í—ä–µ–∑–¥** | –ü–æ–≥—Ä—É–∑–∫–∞ | –í—Ä–µ–º—è –≤—ä–µ–∑–¥–∞ –≤ –∑–æ–Ω—É –ø–æ–≥—Ä—É–∑–∫–∏ | `zone-events` WHERE `zone_tag = 'dt_loading'` ‚Üí `enteredAt` |
| **‚Üí –í—ã–µ–∑–¥** | –ü–æ–≥—Ä—É–∑–∫–∞ | –í—Ä–µ–º—è –≤—ã–µ–∑–¥–∞ –∏–∑ –∑–æ–Ω—ã –ø–æ–≥—Ä—É–∑–∫–∏ | `zone-events` WHERE `zone_tag = 'dt_loading'` ‚Üí `exitedAt` |
| **‚îÜ –°—Ç–æ—è–Ω–∫–∞** | –ü–æ–≥—Ä—É–∑–∫–∞ | –í—Ä–µ–º—è —Å—Ç–æ—è–Ω–∫–∏ –Ω–∞ –ø–æ–≥—Ä—É–∑–∫–µ | `exitedAt - enteredAt` (–¥–ª—è –∑–æ–Ω—ã `dt_loading`) |
| | **–í–´–ì–†–£–ó–ö–ê** | | |
| **–í—ä–µ–∑–¥** | –í—ã–≥—Ä—É–∑–∫–∞ | –í—Ä–µ–º—è –≤—ä–µ–∑–¥–∞ –≤ –∑–æ–Ω—É –≤—ã–≥—Ä—É–∑–∫–∏ | `zone-events` WHERE `zone_tag = 'dt_unloading'` ‚Üí `enteredAt` |
| **‚Üí –í—ã–µ–∑–¥** | –í—ã–≥—Ä—É–∑–∫–∞ | –í—Ä–µ–º—è –≤—ã–µ–∑–¥–∞ –∏–∑ –∑–æ–Ω—ã –≤—ã–≥—Ä—É–∑–∫–∏ | `zone-events` WHERE `zone_tag = 'dt_unloading'` ‚Üí `exitedAt` |
| **‚îÜ –°—Ç–æ—è–Ω–∫–∞** | –í—ã–≥—Ä—É–∑–∫–∞ | –í—Ä–µ–º—è —Å—Ç–æ—è–Ω–∫–∏ –Ω–∞ –≤—ã–≥—Ä—É–∑–∫–µ | `exitedAt - enteredAt` (–¥–ª—è –∑–æ–Ω—ã `dt_unloading`) |
| **–ö–æ–Ω. —Å–º–µ–Ω—ã** | ‚Äî | –í—Ä–µ–º—è –∫–æ–Ω—Ü–∞ —Å–º–µ–Ω—ã | –¢–æ–ª—å–∫–æ –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å—Ç—Ä–æ–∫–µ. –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ ¬´–ù–∞—á. —Å–º–µ–Ω—ã¬ª. |
| **–°—Ä.—Å—Ç –ü** | –°—Ä–µ–¥–Ω–∏–µ | –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è —Å—Ç–æ—è–Ω–∫–∏ –Ω–∞ –ø–æ–≥—Ä—É–∑–∫–µ | `AVG(—Å—Ç–æ—è–Ω–∫–∞_–ø–æ–≥—Ä—É–∑–∫–∏)` –ø–æ –≤—Å–µ–º —Ä–µ–π—Å–∞–º —ç—Ç–æ–π —Å–º–µ–Ω—ã. **–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ ‚Äî –≤ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ.** |
| **–°—Ä.—Å—Ç –í** | –°—Ä–µ–¥–Ω–∏–µ | –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è —Å—Ç–æ—è–Ω–∫–∏ –Ω–∞ –≤—ã–≥—Ä—É–∑–∫–µ | `AVG(—Å—Ç–æ—è–Ω–∫–∞_–≤—ã–≥—Ä—É–∑–∫–∏)` –ø–æ –≤—Å–µ–º —Ä–µ–π—Å–∞–º. –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ. |
| **–°—Ä.–ø—É—Ç—å –ü‚Üí–í** | –°—Ä–µ–¥–Ω–∏–µ | –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –ø—É—Ç–∏ –æ—Ç –ø–æ–≥—Ä—É–∑–∫–∏ –¥–æ –≤—ã–≥—Ä—É–∑–∫–∏ | ‚ùì `AVG(uIn - pOut)` –ø–æ —Ä–µ–π—Å–∞–º? –ò–ª–∏ –∏–∑ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏? **–¢–æ—á–Ω–∞—è –ª–æ–≥–∏–∫–∞ –Ω–µ –æ–±—Å—É–∂–¥–∞–ª–∞—Å—å.** |
| **–°—Ä.–ø—É—Ç—å –í‚Üí–ü** | –°—Ä–µ–¥–Ω–∏–µ | –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –ø—É—Ç–∏ –æ–±—Ä–∞—Ç–Ω–æ | ‚ùì `AVG(pIn[—Å–ª–µ–¥—É—é—â–∏–π] - uOut[—Ç–µ–∫—É—â–∏–π])` –ø–æ —Ä–µ–π—Å–∞–º? **–ù–µ –æ–±—Å—É–∂–¥–∞–ª–æ—Å—å.** |
| **–ö–æ–º–º.** | ‚Äî | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π | ‚ùì –†—É—á–Ω–æ–π –≤–≤–æ–¥? –ò–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π: ¬´–ù–µ—Ç –ø–æ–≥—Ä—É–∑–∫–∏¬ª –µ—Å–ª–∏ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö –∑–æ–Ω—ã. **–õ–æ–≥–∏–∫–∞ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞.** |

**–í–∏–∑—É–∞–ª—å–Ω–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –ø–æ–¥—Ç–∞–±–ª–∏—Ü—ã:**
- –ë–ª–æ–∫–∏ (–ü–æ–≥—Ä—É–∑–∫–∞, –í—ã–≥—Ä—É–∑–∫–∞, –°—Ä–µ–¥–Ω–∏–µ, –ö–æ–º–º.) —Ä–∞–∑–¥–µ–ª–µ–Ω—ã **—Å–ø–ª–æ—à–Ω—ã–º–∏ –ª–∏–Ω–∏—è–º–∏** (`blk-start`)
- –í–Ω—É—Ç—Ä–∏ –ü–æ–≥—Ä—É–∑–∫–∏ –∏ –í—ã–≥—Ä—É–∑–∫–∏: –º–µ–∂–¥—É –í—ä–µ–∑–¥–æ–º‚Üí–í—ã–µ–∑–¥–æ–º ‚Äî **—Å—Ç—Ä–µ–ª–∫–∞**, –º–µ–∂–¥—É –í—ã–µ–∑–¥–æ–º –∏ –°—Ç–æ—è–Ω–∫–æ–π ‚Äî **–ø—É–Ω–∫—Ç–∏—Ä**

---

## 4. –ö–ù–û–ü–ö–ê ¬´–§–û–†–ú–ò–†–û–í–ê–ù–ò–ï –û–¢–ß–Å–¢–ê¬ª (–ê–Ω–∞–ª–∏—Ç–∏–∫–∞)

| –≠–ª–µ–º–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| –ö–Ω–æ–ø–∫–∞ | –ó–µ–ª—ë–Ω–∞—è, –≤ —à–∞–ø–∫–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤. –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ ‚Äî –≤—ã–µ–∑–∂–∞–µ—Ç –æ–≤–µ—Ä–ª–µ–π-–ø–∞–Ω–µ–ª—å —Å–ø—Ä–∞–≤–∞ (340px) |
| –ü–∞–Ω–µ–ª—å | **–ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä** ü§å ¬´–¢—É—Ç –±—É–¥—É—Ç —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å—Å—è Excel-–æ—Ç—á—ë—Ç—ã¬ª. –ù–µ —Å–∂–∏–º–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—É, –∞ ¬´–Ω–∞–ø–ª—ã–≤–∞–µ—Ç¬ª. |
| –ó–∞–∫—Ä—ã—Ç–∏–µ | –ö—Ä–µ—Å—Ç–∏–∫ ‚úï –∏–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–∫–∏ |

**TODO:** –õ–æ–≥–∏–∫–∞ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è Excel-–æ—Ç—á—ë—Ç–æ–≤ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞. –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∑–∂–µ.

---

## 5. –†–ï–ï–°–¢–† –ù–ï–û–ü–†–ï–î–ï–õ–Å–ù–ù–û–°–¢–ï–ô

–ù–∏–∂–µ ‚Äî –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≥–¥–µ **–∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω** –∏–ª–∏ **–ª–æ–≥–∏–∫–∞ —Ä–∞—Å—á—ë—Ç–∞ –Ω–µ –æ–±—Å—É–∂–¥–∞–ª–∞—Å—å**.

### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ (–±–µ–∑ –Ω–∏—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)

| # | –≠–ª–µ–º–µ–Ω—Ç | –ü—Ä–æ–±–ª–µ–º–∞ | –ß—Ç–æ –Ω—É–∂–Ω–æ |
|---|---------|----------|-----------|
| 1 | **–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∑–∞—è–≤–æ–∫** | –¢–µ–∫—É—â–∏–π API –∑–Ω–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–æ–º–µ—Ä–∞ –∑–∞—è–≤–æ–∫ (`requestNumbers`). –ù–µ—Ç –º–∞—Ä—à—Ä—É—Ç–∞, –≥—Ä—É–∑–∞, –¥–∞—Ç, –ø–ª–∞–Ω–æ–≤—ã—Ö –æ–±—ä—ë–º–æ–≤, –≥–æ—Ä–æ–¥–æ–≤. | –ù–æ–≤—ã–π endpoint `GET /api/dt/orders` –∏–ª–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ |
| 2 | **–ü—Ä–æ—Ü–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞—è–≤–∫–∏ (`pct`)** | –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ —á—Ç–æ —Å—á–∏—Ç–∞–µ—Ç—Å—è 100%. –û–±—ä—ë–º? –†–µ–π—Å—ã? –¢–æ–Ω–Ω–∞–∂? | –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ñ–æ—Ä–º—É–ª—É: `fact / plan * 100` ‚Äî –Ω–æ –ø–æ –∫–∞–∫–æ–π –º–µ—Ç—Ä–∏–∫–µ? |
| 3 | **–ü–ª–∞–Ω–æ–≤—ã–µ –æ–±—ä—ë–º—ã** (`totalWt`, `totalVol`, `vol` –ø–ª–∞–Ω) | –ù–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –∏–∑ API. `factVolumeM3` –≤—Å–µ–≥–¥–∞ 0. | –õ–∏–±–æ –ø–æ—á–∏–Ω–∏—Ç—å `factVolumeM3`, –ª–∏–±–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–ª–∞–Ω –≤ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∑–∞—è–≤–æ–∫ |
| 4 | **–°—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏** (`active` / `done`) | –†—É—á–Ω–æ–π –∏–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π? | –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É |
| 5 | **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –≥–æ—Ä–æ–¥–∞–º** | –ù–µ—Ç –ø–æ–ª—è `city` –≤ API | –ú–∞–ø–ø–∏–Ω–≥ `objectName ‚Üí city` –∏–ª–∏ –ø–æ–ª–µ –≤ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–µ |

### üü° –í–∞–∂–Ω—ã–µ (–Ω—É–∂–Ω—ã –¥–ª—è –ø–æ–ª–Ω–æ—Ç—ã)

| # | –≠–ª–µ–º–µ–Ω—Ç | –ü—Ä–æ–±–ª–µ–º–∞ | –ß—Ç–æ –Ω—É–∂–Ω–æ |
|---|---------|----------|-----------|
| 6 | **–ú–∞—à–∏–Ω—ã –≤ —Ä–µ–º–æ–Ω—Ç–µ** | –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –≤ API | –ù–æ–≤—ã–π endpoint `GET /api/dt/repairs` |
| 7 | **–ü–ª–∞–Ω —Ä–µ–π—Å–æ–≤** (–Ω–µ–¥–µ–ª—å–Ω–∞—è —Å–≤–æ–¥–∫–∞, —à–∫–∞–ª–∞ ¬´–†–µ–π—Å—ã/–ø–ª–∞–Ω¬ª) | –£–ø–æ–º—è–Ω—É—Ç–æ ¬´–ø–ª–∞–Ω —Ä–µ–π—Å–æ–≤ –≤ –¥–µ–Ω—å √ó 7¬ª, –Ω–æ —Å–∞–º –ø–ª–∞–Ω –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω | –õ–∏–±–æ –ø–æ–ª–µ –≤ –∑–∞—è–≤–∫–µ, –ª–∏–±–æ –∫–æ–Ω—Ñ–∏–≥ per-–æ–±—ä–µ–∫—Ç |
| 8 | **–°—Ä.–ø—É—Ç—å –ü‚Üí–í –∏ –í‚Üí–ü** | –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ `–≤—Ä–µ–º—è_–≤—ã–≥—Ä—É–∑–∫–∏.–≤—ä–µ–∑–¥ - –≤—Ä–µ–º—è_–ø–æ–≥—Ä—É–∑–∫–∏.–≤—ã–µ–∑–¥`, –Ω–æ –Ω–µ –æ–±—Å—É–∂–¥–∞–ª–æ—Å—å | –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —Ñ–æ—Ä–º—É–ª—É |
| 9 | **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ —Ä–µ–π—Å–∞–º** | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∏–ª–∏ —Ä—É—á–Ω—ã–µ? | –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫ |
| 10 | **–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –∏ –≤—Ä–µ–º—è –º–∞—Ä—à—Ä—É—Ç–∞** (`dist`, `time`) | `trips.distanceKm` = 0 | –í—Ä—É—á–Ω—É—é –≤ –∑–∞—è–≤–∫–µ –∏–ª–∏ –ø–æ—á–∏–Ω–∏—Ç—å –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ |
| 11 | **–¢–° (—Ñ–æ—Ä–º–∞—Ç X/Y)** | –ù–∞–∑–Ω–∞—á–µ–Ω–æ/–¥–æ—Å—Ç—É–ø–Ω–æ? –ù–∞–∑–Ω–∞—á–µ–Ω–æ/–≤—Å–µ–≥–æ –ø–æ –∑–∞—è–≤–∫–µ? | –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å |
| 12 | **–û–±—ä—ë–º —Ç** (–Ω–µ–¥–µ–ª—å–Ω–∞—è —Å–≤–æ–¥–∫–∞) | –ö–∞–∫ —Å—á–∏—Ç–∞—Ç—å –µ—Å–ª–∏ `factVolumeM3` = 0 | –ß–µ—Ä–µ–∑ —Ä–µ–π—Å—ã √ó —Ç–æ–Ω–Ω–∞–∂/—Ä–µ–π—Å –∏–∑ –∑–∞—è–≤–∫–∏? |

### üü¢ –ü–æ–Ω—è—Ç–Ω—ã–µ (–Ω–æ –Ω—É–∂–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å)

| # | –≠–ª–µ–º–µ–Ω—Ç | –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º–∞—è –ª–æ–≥–∏–∫–∞ | –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å? |
|---|---------|----------------------|-------------|
| 13 | **–í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞/–∫–æ–Ω—Ü–∞ —Å–º–µ–Ω—ã** | –ü–µ—Ä–≤—ã–π/–ø–æ—Å–ª–µ–¥–Ω–∏–π zone-event `dt_boundary` | –î–∞ |
| 14 | **–°—Ç–æ—è–Ω–∫–∞ –Ω–∞ –ø–æ–≥—Ä—É–∑–∫–µ** | `exitedAt - enteredAt` –¥–ª—è `dt_loading` | –î–∞ |
| 15 | **–°—Ç–æ—è–Ω–∫–∞ –Ω–∞ –≤—ã–≥—Ä—É–∑–∫–µ** | `exitedAt - enteredAt` –¥–ª—è `dt_unloading` | –î–∞ |
| 16 | **–ö–ò–ü –ø–æ –æ–±—ä–µ–∫—Ç—É** (—Å–≤–æ–¥–∫–∞) | `AVG(kipPct)` –≤—Å–µ—Ö –º–∞—à–∏–Ω –æ–±—ä–µ–∫—Ç–∞ –∑–∞ –Ω–µ–¥–µ–ª—é | –î–∞ |
| 17 | **–ö—Ä—É–≥–æ–≤—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã: –¥–≤–∏–∂–µ–Ω–∏–µ/—Å—Ç–æ—è–Ω–∫–∞** | `movementPct` ‚Üí –∑–µ–ª—ë–Ω—ã–π, `100 - movementPct` ‚Üí –∫—Ä–∞—Å–Ω—ã–π | –ò–ª–∏ —Å—á–∏—Ç–∞–µ—Ç—Å—è –∏–Ω–∞—á–µ? |

---

## 6. –ú–ê–ü–ü–ò–ù–ì UI ‚Üî API FIELDS

–ë—ã—Å—Ç—Ä–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞ ‚Äî –∫–∞–∫–∏–µ –ø–æ–ª—è API —É–∂–µ –ø–æ–∫—Ä—ã–≤–∞—é—Ç –∫–∞–∫–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã UI:

| API –ø–æ–ª–µ (`shift-records`) | –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ UI |
|---------------------------|----------------------|
| `regNumber` | –ì–æ—Å.‚Ññ –≤ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ, –ø—Ä–∏–≤—è–∑–∫–∞ –∫ –º–∞—à–∏–Ω–µ |
| `nameMO` | –ú–∞—Ä–∫–∞ –º–æ–¥–µ–ª–∏ |
| `objectName` | –û–±—ä–µ–∫—Ç –∑–∞—Ç—Ä–∞—Ç, –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ |
| `shiftType` | –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ 1/2 —Å–º–µ–Ω—É |
| `reportDate` | –î–∞—Ç–∞ –≤ –ì–∞–Ω—Ç—Ç–µ, –¥–∞—Ç–∞ –≤ –¥–µ—Ä–µ–≤–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ |
| `kipPct` | –ö–ò–ü% –≤–æ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö –∏ —à–∫–∞–ª–∞—Ö |
| `movementPct` | –î–≤–∏–∂.% –∏ –∫—Ä—É–≥–æ–≤—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã |
| `tripsCount` | –†–µ–π—Å—ã –ø–æ–≤—Å—é–¥—É |
| `requestNumbers` | –°–≤—è–∑–∫–∞ —Å –∑–∞—è–≤–∫–æ–π |
| `plId` | –ü–õ –≤ –∫–∞—Ä—Ç–æ—á–∫–µ –∑–∞—è–≤–∫–∏ |
| `engineTimeSec` | ‚ùì –ù–∏–≥–¥–µ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é, –Ω–æ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ % |
| `onsiteMin` | ‚ùì –ù–∏–≥–¥–µ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é |
| `factVolumeM3` | –î–æ–ª–∂–µ–Ω –±—ã—Ç—å ¬´–û–±—ä—ë–º¬ª, –Ω–æ –≤—Å–µ–≥–¥–∞ 0 |
| `distanceKm` | –î–æ–ª–∂–µ–Ω –±—ã—Ç—å ¬´–†–∞—Å—Å—Ç.¬ª, –Ω–æ –≤—Å–µ–≥–¥–∞ 0 |

| API –ø–æ–ª–µ (`trips`) | –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è |
|--------------------|-----------------|
| `tripNumber` | –ù–æ–º–µ—Ä —Ä–µ–π—Å–∞ –≤ –ø–æ–¥—Ç–∞–±–ª–∏—Ü–µ |
| `loadedAt` | ‚ùì –í–æ–∑–º–æ–∂–Ω–æ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å pOut (–≤—ã–µ–∑–¥ –∏–∑ –∑–æ–Ω—ã –ø–æ–≥—Ä—É–∑–∫–∏) |
| `unloadedAt` | ‚ùì –í–æ–∑–º–æ–∂–Ω–æ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å uOut |
| `durationMin` | ‚ùì –ù–∏–≥–¥–µ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é |

| API –ø–æ–ª–µ (`zone-events`) | –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è |
|-------------------------|-----------------|
| `zone_tag = 'dt_loading'` + `enteredAt` | –ü–æ–≥—Ä—É–∑–∫–∞ ‚Üí –í—ä–µ–∑–¥ |
| `zone_tag = 'dt_loading'` + `exitedAt` | –ü–æ–≥—Ä—É–∑–∫–∞ ‚Üí –í—ã–µ–∑–¥ |
| `zone_tag = 'dt_unloading'` + `enteredAt` | –í—ã–≥—Ä—É–∑–∫–∞ ‚Üí –í—ä–µ–∑–¥ |
| `zone_tag = 'dt_unloading'` + `exitedAt` | –í—ã–≥—Ä—É–∑–∫–∞ ‚Üí –í—ã–µ–∑–¥ |
| `zone_tag = 'dt_boundary'` | –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞/–∫–æ–Ω—Ü–∞ —Å–º–µ–Ω—ã |

---

## 7. –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –î–õ–Ø –ë–≠–ö–ï–ù–î–ê

1. **–°–æ–∑–¥–∞—Ç—å —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∑–∞—è–≤–æ–∫** ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø–æ–ª—è: `id`, `number`, `city`, `status`, `dateFrom`, `dateTo`, `routeFrom`, `routeTo`, `distance`, `estimatedTime`, `cargo`, `weightPerTrip`, `volumePerTrip`, `totalWeight`, `totalVolume`, `planTrips`, `objectName`, `assignedVehicles[]`
2. **–°–æ–∑–¥–∞—Ç—å endpoint —Ä–µ–º–æ–Ω—Ç–æ–≤** ‚Äî –ø–æ–ª—è: `vehicleId`, `regNumber`, `nameMO`, `type` (repair/maintenance), `reason`, `dateFrom`, `dateTo`, `objectName`
3. **–ü–æ—á–∏–Ω–∏—Ç—å –∏–ª–∏ –æ–±–æ–π—Ç–∏ `factVolumeM3`** ‚Äî –µ—Å–ª–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è –Ω–µ –æ—Ç–¥–∞—ë—Ç –æ–±—ä—ë–º, —Å—á–∏—Ç–∞—Ç—å —á–µ—Ä–µ–∑ `tripsCount √ó weightPerTrip` –∏–∑ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ –∑–∞—è–≤–æ–∫
4. **–£—Ç–æ—á–Ω–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç `requestNumbers`** ‚Äî –º–∞—Å—Å–∏–≤ –∏–ª–∏ —Å—Ç—Ä–æ–∫–∞ —Å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–º? –î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ JOIN
5. **–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ñ–æ—Ä–º—É–ª—É `pct`** ‚Äî –ø—Ä–æ—Ü–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞—è–≤–∫–∏. –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ: `SUM(tripsCount_–≤—Å–µ—Ö_–º–∞—à–∏–Ω_–ø–æ_–∑–∞—è–≤–∫–µ) / planTrips * 100`
6. **–î–æ–±–∞–≤–∏—Ç—å –ø–ª–∞–Ω —Ä–µ–π—Å–æ–≤** ‚Äî –ª–∏–±–æ per-–∑–∞—è–≤–∫–∞ (`planTrips`), –ª–∏–±–æ per-–æ–±—ä–µ–∫—Ç-per-–¥–µ–Ω—å (–¥–ª—è –Ω–µ–¥–µ–ª—å–Ω—ã—Ö —à–∫–∞–ª)
