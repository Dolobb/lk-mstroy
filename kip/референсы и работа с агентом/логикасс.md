### Логика работы с саммосвалами поэтапно
- логика описана для интерфейса при котором пользователь выгружает одну конкретную смену либо один конкретный день с двумя сменами. Также в интерфейсе нужно учесть возможность выгрузить текущую смену (например в 13:00 выгрузить всю работу с 7:30 до 13:00). Так как мы планируем создавать базу данных а не вручную выбирать нужный день для выгрузки - в ТЗ базовым сценарием будем считать автоматическую выгрузку за 1 смену которая будет происходить через 1 час после ее окончания (то есть алгоритм действий начинается например 1 апреля в 8:30 по времени объекта и выгружает 2-ю смену предыдущего дня 31 марта)
- В файле-конфиге указано в формате иерархии 1-Зона объекта(Тюмень, Тобольск...) 2 - Зоны погрузки и зоны выгрузки 2.1 какие из зон учитываются как "Работа по месту"
- При выгрузке "отчета самосвалов" нужно определить какие из машин с "самосвал" в названии находились в зоне каждого из объектов. Пока не определились как лучше это раеализовать - либо выгружать каждый час текущее местоположение всех машин и хранить в базе данных + обновлять количество машин на каждом участке. Либо втупую выгружать все машины и всех их проверять по зонам /Вот здесь надо подробно обсудить с claude
- Когда машины и виды их работы определены - запрашиваем getMonitoringStats по каждой группе за нужный нам период, далее алгоритм пропишу для одного объекта из всех что добавлены
- Когда машины определены, нужно определить как они работали: либо по доставке, либо по выгрузке. По месту - машина находилась в зоне отмеченной тегом "по месту" 60% от общего нахождения на участке. Доставка - находилась за выбранный период и в зоне погрузки и в зоне выгрузки.
- Для "работы по месту" - как промежуточный результат выписываем время в движении и время стоянки за смену
- Для "доставки" - составляем промежуточную таблицу рейсов: входные данные примерного формата я уже присылал, также отправлю референс этой таблицы (Сингапай 17.02) который я составляю с помощью excel powerquery и если нужно будет для составления алгоритма, могу прислать код PQ на языке M для этой задачи.
- Таблица "доставки" будет как дополнительная таблица открывающаяся отдельной вкладкой. Основная таблица будет включать в себя и доставку и по месту, ее референс лежит в другом эксель файле который я прикрепил. Оговорка - для тех машин что работают по месту блок "Факт по навигации" будет содержать не столбцы {рейсы объем остаток}, а столбцы {Время стоянки - время в движении - расход топлива}. Все данные для основной таблицы берутся либо из уже выгруженного мониторинга либо из ПЛ + Заявки
- Конечным результатом является основная таблица по каждому из нужных которая пойдет в большой общий интерфейс вкладки "самосвалы" на сайте, а также доп. таблица рейсов. Остальные подробности (оформление, интеграция итд) будут разрабатываться уже в общей работе над проектом