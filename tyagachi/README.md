# –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ
## –ü—Ä–æ–µ–∫—Ç: Transport Analytics ‚Äî –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–æ–∫ –∏ –ø—É—Ç–µ–≤—ã—Ö –ª–∏—Å—Ç–æ–≤

**–í–µ—Ä—Å–∏—è:** 1.0
**–î–∞—Ç–∞:** 2026-01-26
**–°—Ç–∞—Ç—É—Å:** –ù–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–∏

---

## 1. –û–ë–©–ò–ï –°–í–ï–î–ï–ù–ò–Ø

### 1.1 –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–û—Ñ–ª–∞–π–Ω-–ø–∞–π–ø–ª–∞–π–Ω –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ –¥–≤—É—Ö –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤:
- **Requests** (–∑–∞—è–≤–∫–∏ –Ω–∞ –ø–µ—Ä–µ–≤–æ–∑–∫—É)
- **PL** (–ø—É—Ç–µ–≤—ã–µ –ª–∏—Å—Ç—ã —Å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è)

### 1.2 –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞

–ü–æ–ª—É—á–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ, –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–æ–∫ –∏ –ø—É—Ç–µ–≤—ã—Ö –ª–∏—Å—Ç–æ–≤ –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ä–∞–±–æ—Ç (–≤—Ä–µ–º—è, –ø—Ä–æ–±–µ–≥, —Ñ–∞–∫—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è).

### 1.3 –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç **–ù–ï** –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è:
- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π –¥–∞–Ω–Ω—ã—Ö
- –ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π
- –§–∏–Ω–∞–Ω—Å–æ–≤—ã–º–∏ —Ä–∞—Å—á—ë—Ç–∞–º–∏
- –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è–º–∏ –∏–ª–∏ ML

**–¢–æ–ª—å–∫–æ** –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö.

### 1.4 –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

| –ü—Ä–∏–Ω—Ü–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| Fail-soft | –û—à–∏–±–∫–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ |
| –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å | –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ ‚Üí –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç |
| –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å | –ö–∞–∂–¥—ã–π —ç—Ç–∞–ø –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è |
| –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å | –ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫, –±—É–¥—Ç–æ –¥–∞–Ω–Ω—ã–µ –≤—Å–µ–≥–¥–∞ —Ö—É–∂–µ –æ–∂–∏–¥–∞–µ–º–æ–≥–æ |

---

## 2. –ü–†–ï–î–ú–ï–¢–ù–ê–Ø –û–ë–õ–ê–°–¢–¨

### 2.1 –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö

#### 2.1.1 Requests (–ó–∞—è–≤–∫–∏)

**–§–∞–π–ª:** `Requests_raw.json`

Requests –∏ PL ‚Äî —ç—Ç–æ **–¥–≤–∞ —Ä–∞–∑–Ω—ã—Ö –º–∏—Ä–∞**:
- –ü—Ä–∏—Ö–æ–¥—è—Ç –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- –ù–µ –∏–º–µ—é—Ç –ø—Ä—è–º—ã—Ö ID-—Å–≤—è–∑–µ–π
- –ú–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ–ø–æ–ª–Ω—ã–º–∏
- –ú–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º—É—Å–æ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

**–ë–∏–∑–Ω–µ—Å-–∫–ª—é—á:** `request.number` (integer)

**–õ–æ–≥–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
request
 ‚îú‚îÄ‚îÄ number (–Ω–æ–º–µ—Ä –∑–∞—è–≤–∫–∏) ‚Üê –ö–õ–Æ–ß –î–õ–Ø –°–í–Ø–ó–ò
 ‚îú‚îÄ‚îÄ status
 ‚îú‚îÄ‚îÄ dateProcessed
 ‚îî‚îÄ‚îÄ orders[]
      ‚îú‚îÄ‚îÄ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –∑–∞–¥–∞–Ω–∏—è (cargo, weight, volume, countTs)
      ‚îú‚îÄ‚îÄ route
      ‚îÇ    ‚îî‚îÄ‚îÄ points[]
      ‚îî‚îÄ‚îÄ objectExpend
```

**–í–∞–∂–Ω–æ:**
- `request.number` ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã
- –ù–∏–∫–∞–∫–∏–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ ID –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —Å–≤—è–∑–∫–∏
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–ª–æ–∂–µ–Ω–Ω–∞—è, –ø–æ–ª—è –º–æ–≥—É—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å

#### 2.1.2 PL (–ü—É—Ç–µ–≤—ã–µ –ª–∏—Å—Ç—ã)

**–§–∞–π–ª:** `PL_raw.json`

**–ö–ª—é—á–µ–≤–∞—è –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å:**
–§–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–∞—Ö–æ–¥—è—Ç—Å—è **–ù–ï** –≤ `route_list`, –∞ –≤ **`calcs`**.

**calcs** ‚Äî —ç—Ç–æ —Ä–∞—Å—á—ë—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏, –∫–æ—Ç–æ—Ä—ã–µ:
- –û—Ç—Ä–∞–∂–∞—é—Ç —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
- –°–æ–¥–µ—Ä–∂–∞—Ç –ø—Ä–æ–±–µ–≥, –≤—Ä–µ–º—è, —Å—Ç–∞—Ç—É—Å
- –õ–æ–≥–∏—á–µ—Å–∫–∏ –±–ª–∏–∂–µ –≤—Å–µ–≥–æ –∫ "–≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é –∑–∞—è–≤–∫–∏"

**–í–∞–∂–Ω–æ:**
- –û–¥–∏–Ω –ø—É—Ç–µ–≤–æ–π –ª–∏—Å—Ç –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ `calcs`
- –û–¥–∏–Ω `calc` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç **–æ–¥–Ω–æ–π** –∑–∞—è–≤–∫–µ
- `calcs` ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è —Å—É—â–Ω–æ—Å—Ç—å –¥–ª—è –º—ç—Ç—á–∏–Ω–≥–∞

### 2.2 –°–≤—è–∑—å –º–µ–∂–¥—É –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏

**–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –¥–æ–ø—É—Å—Ç–∏–º–∞—è —Å–≤—è–∑—å:** –Ω–æ–º–µ—Ä –∑–∞—è–≤–∫–∏

**–ì–¥–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –Ω–æ–º–µ—Ä –∑–∞—è–≤–∫–∏ –≤ PL:**
- –ù–æ–º–µ—Ä –∑–∞—è–≤–∫–∏ **–ù–ï** —è–≤–ª—è–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–º –ø–æ–ª–µ–º
- –û–Ω –∑–∞—à–∏—Ç –≤ —Å—Ç—Ä–æ–∫–µ `orderDescr`
- –§–æ—Ä–º–∞—Ç: `‚ÑñNNNNNN/N` (–Ω–∞–ø—Ä–∏–º–µ—Ä: `‚Ññ120632/1`)

**–ü—Ä–∞–≤–∏–ª–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è:**
```
–í—Ö–æ–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞: "‚Ññ120360/1 –æ—Ç 31.12.2025. –¢–§ \"–ú–æ—Å—Ç–æ–æ—Ç—Ä—è–¥-36\""
                  ‚Üì
–ò–∑–≤–ª–µ–∫–∞–µ–º: –≤—Å–µ —Ü–∏—Ñ—Ä—ã –¥–æ –ø–µ—Ä–≤–æ–≥–æ "/" –∏–ª–∏ –ø—Ä–æ–±–µ–ª–∞
                  ‚Üì
–†–µ–∑—É–ª—å—Ç–∞—Ç: 120360 (integer)
```

**–ù–ï–õ–¨–ó–Ø —Å–≤—è–∑—ã–≤–∞—Ç—å –ø–æ:**
- –î–∞—Ç–µ
- –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–º—É —Å—Ä–µ–¥—Å—Ç–≤—É
- –ú–∞—Ä—à—Ä—É—Ç—É
- –≠–≤—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–º –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è–º

---

## 3. –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –†–ï–®–ï–ù–ò–Ø

### 3.1 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

```
TransportAnalytics/
‚îú‚îÄ‚îÄ Data/
‚îÇ   ‚îú‚îÄ‚îÄ raw/                      # –ò—Å—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Requests_raw.json
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ PL_raw.json
‚îÇ   ‚îú‚îÄ‚îÄ intermediate/             # –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ requests_parsed.csv   # –ü–∞—Ä—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞—è–≤–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pl_parsed.csv         # –ü–∞—Ä—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ calcs
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ extraction_log.json   # –õ–æ–≥ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –Ω–æ–º–µ—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ final/                    # –ò—Ç–æ–≥–æ–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ matched_output.csv    # –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îî‚îÄ‚îÄ logs/                     # –õ–æ–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
‚îÇ       ‚îî‚îÄ‚îÄ pipeline.log
‚îú‚îÄ‚îÄ src/                          # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ parsers/                  # –ü–∞—Ä—Å–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ request_parser.py     # –ü–∞—Ä—Å–µ—Ä –∑–∞—è–≤–æ–∫
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ pl_parser.py          # –ü–∞—Ä—Å–µ—Ä –ø—É—Ç–µ–≤—ã—Ö –ª–∏—Å—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ matchers/                 # –õ–æ–≥–∏–∫–∞ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ request_pl_matcher.py
‚îÇ   ‚îú‚îÄ‚îÄ utils/                    # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ extractors.py         # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ –∑–∞—è–≤–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logger.py             # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ validators.py         # –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ pipeline.py               # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –ø–∞–π–ø–ª–∞–π–Ω–∞
‚îú‚îÄ‚îÄ archive/                      # –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ scripts/                  # –°—Ç–∞—Ä—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ processed/                # –°—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îî‚îÄ‚îÄ other/                    # –ü—Ä–æ—á–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ config.yaml                   # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ main.py                       # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ run.bat                       # –ó–∞–ø—É—Å–∫ –¥–ª—è Windows
‚îú‚îÄ‚îÄ run.sh                        # –ó–∞–ø—É—Å–∫ –¥–ª—è Mac/Linux
‚îú‚îÄ‚îÄ requirements.txt              # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ README.md                     # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îú‚îÄ‚îÄ TECHNICAL_SPEC.md             # –≠—Ç–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ
‚îî‚îÄ‚îÄ –ø–µ—Ä–µ–≤–æ–¥.py, –ø–µ—Ä–µ–≤–æ–¥_–ü–õ.py     # –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ –ø–æ–ª–µ–π (—Å–æ—Ö—Ä–∞–Ω—è–µ–º)
```

### 3.2 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         main.py                                  ‚îÇ
‚îÇ                    (–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞)                                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚îÇ
                              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      src/pipeline.py                             ‚îÇ
‚îÇ                   (–û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è —ç—Ç–∞–ø–æ–≤)                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
          ‚îÇ              ‚îÇ              ‚îÇ              ‚îÇ
          ‚ñº              ‚ñº              ‚ñº              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  validators  ‚îÇ ‚îÇ   parsers    ‚îÇ ‚îÇ  extractors  ‚îÇ ‚îÇ   matchers   ‚îÇ
‚îÇ              ‚îÇ ‚îÇ              ‚îÇ ‚îÇ              ‚îÇ ‚îÇ              ‚îÇ
‚îÇ –í–∞–ª–∏–¥–∞—Ü–∏—è    ‚îÇ ‚îÇ –ü–∞—Ä—Å–∏–Ω–≥      ‚îÇ ‚îÇ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ   ‚îÇ ‚îÇ –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ‚îÇ
‚îÇ –≤—Ö–æ–¥–Ω—ã—Ö JSON ‚îÇ ‚îÇ Requests/PL  ‚îÇ ‚îÇ –Ω–æ–º–µ—Ä–∞ –∑–∞—è–≤–∫–∏‚îÇ ‚îÇ –¥–∞–Ω–Ω—ã—Ö       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## 4. –°–ü–ï–¶–ò–§–ò–ö–ê–¶–ò–Ø –î–ê–ù–ù–´–•

### 4.1 –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

#### 4.1.1 Requests_raw.json

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–µ—Ä—Ö–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è:**
```json
{
  "list": [
    { /* request object */ },
    { /* request object */ },
    ...
  ]
}
```

**–ü–æ–ª—è Request (–∏–∑ —Ñ–∞–π–ª–∞ –ø–µ—Ä–µ–≤–æ–¥.py):**

| JSON –ø—É—Ç—å | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ |
|-----------|-----|----------|--------------|
| `number` | int | –ù–æ–º–µ—Ä –∑–∞—è–≤–∫–∏ (–±–∏–∑–Ω–µ—Å-–∫–ª—é—á) | –î–∞ |
| `status` | string | –°—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏ | –ù–µ—Ç |
| `dateProcessed` | string | –î–∞—Ç–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ | –ù–µ—Ç |
| `orders[0].nameCargo` | string | –ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –≥—Ä—É–∑–∞ | –ù–µ—Ç |
| `orders[0].weightCargo` | float | –í–µ—Å –≥—Ä—É–∑–∞ | –ù–µ—Ç |
| `orders[0].volumeCargo` | float | –û–±—ä—ë–º –≥—Ä—É–∑–∞ | –ù–µ—Ç |
| `orders[0].countTs` | int | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¢–° | –ù–µ—Ç |
| `orders[0].route.points[0].address` | string | –ê–¥—Ä–µ—Å –Ω–∞—á–∞–ª–∞ –º–∞—Ä—à—Ä—É—Ç–∞ | –ù–µ—Ç |
| `orders[0].route.points[-1].address` | string | –ê–¥—Ä–µ—Å –∫–æ–Ω—Ü–∞ –º–∞—Ä—à—Ä—É—Ç–∞ | –ù–µ—Ç |
| `orders[0].route.distance` | float | –î–∏—Å—Ç–∞–Ω—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–∞ | –ù–µ—Ç |
| `orders[0].route.time` | float | –í—Ä–µ–º—è –º–∞—Ä—à—Ä—É—Ç–∞ | –ù–µ—Ç |
| `orders[0].objectExpend.code` | string | –ö–æ–¥ –æ–±—ä–µ–∫—Ç–∞ –∑–∞—Ç—Ä–∞—Ç | –ù–µ—Ç |
| `orders[0].objectExpend.name` | string | –ù–∞–∑–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –∑–∞—Ç—Ä–∞—Ç | –ù–µ—Ç |

#### 4.1.2 PL_raw.json

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–µ—Ä—Ö–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è:**
```json
{
  "list": [
    { /* route_list object */ },
    { /* route_list object */ },
    ...
  ]
}
```

**–ü–æ–ª—è Route List (–∏–∑ —Ñ–∞–π–ª–∞ –ø–µ—Ä–µ–≤–æ–¥_–ü–õ.py):**

| JSON –ø—É—Ç—å | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ |
|-----------|-----|----------|--------------|
| `tsNumber` | string | –ù–æ–º–µ—Ä –¢–° | –ù–µ—Ç |
| `dateOut` | string | –î–∞—Ç–∞ –≤—ã–µ–∑–¥–∞ | –ù–µ—Ç |
| `status` | string | –°—Ç–∞—Ç—É—Å –ü–õ | –ù–µ—Ç |
| `closeList` | bool | –ó–∞–∫—Ä—ã—Ç –ª–∏ –ü–õ | –ù–µ—Ç |
| `calcs[].orderDescr` | string | –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ (—Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–æ–º–µ—Ä –∑–∞—è–≤–∫–∏) | –ù–µ—Ç |
| `calcs[].totalClock` | float | –û–±—â–µ–µ –≤—Ä–µ–º—è | –ù–µ—Ç |
| `calcs[].idleClock` | float | –í—Ä–µ–º—è –ø—Ä–æ—Å—Ç–æ—è | –ù–µ—Ç |
| `calcs[].objectExpend` | string | –û–±—ä–µ–∫—Ç –∑–∞—Ç—Ä–∞—Ç | –ù–µ—Ç |
| `calcs[].routeDistance` | float | –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –ø–æ –º–∞—Ä—à—Ä—É—Ç—É | –ù–µ—Ç |
| `calcs[].routeTime` | float | –í—Ä–µ–º—è –ø–æ –º–∞—Ä—à—Ä—É—Ç—É | –ù–µ—Ç |
| `glonass.distance` | float | –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –ø–æ –ì–õ–û–ù–ê–°–° | –ù–µ—Ç |
| `glonass.engineTime` | float | –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –¥–≤–∏–≥–∞—Ç–µ–ª—è | –ù–µ—Ç |

### 4.2 –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

#### 4.2.1 requests_parsed.csv

–ü–ª–æ—Å–∫–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å–æ –≤—Å–µ–º–∏ –∑–∞—è–≤–∫–∞–º–∏.

| –ö–æ–ª–æ–Ω–∫–∞ | –¢–∏–ø | –ò—Å—Ç–æ—á–Ω–∏–∫ |
|---------|-----|----------|
| request_number | int | `number` |
| request_status | str | `status` |
| request_date_processed | str | `dateProcessed` |
| order_name_cargo | str | `orders[0].nameCargo` |
| order_weight_cargo | float | `orders[0].weightCargo` |
| order_volume_cargo | float | `orders[0].volumeCargo` |
| order_count_ts | int | `orders[0].countTs` |
| route_start_address | str | `orders[0].route.points[0].address` |
| route_end_address | str | `orders[0].route.points[-1].address` |
| route_distance | float | `orders[0].route.distance` |
| route_time | float | `orders[0].route.time` |
| object_expend_code | str | `orders[0].objectExpend.code` |
| object_expend_name | str | `orders[0].objectExpend.name` |

#### 4.2.2 pl_parsed.csv

–ü–ª–æ—Å–∫–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å calcs –∏–∑ –≤—Å–µ—Ö –ø—É—Ç–µ–≤—ã—Ö –ª–∏—Å—Ç–æ–≤.

| –ö–æ–ª–æ–Ω–∫–∞ | –¢–∏–ø | –ò—Å—Ç–æ—á–Ω–∏–∫ |
|---------|-----|----------|
| pl_id | str | –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π ID (tsNumber + dateOut) |
| pl_ts_number | str | `tsNumber` |
| pl_date_out | str | `dateOut` |
| pl_status | str | `status` |
| pl_close_list | bool | `closeList` |
| calc_order_descr | str | `calcs[].orderDescr` |
| calc_total_clock | float | `calcs[].totalClock` |
| calc_idle_clock | float | `calcs[].idleClock` |
| calc_object_expend | str | `calcs[].objectExpend` |
| calc_route_distance | float | `calcs[].routeDistance` |
| calc_route_time | float | `calcs[].routeTime` |
| glonass_distance | float | `glonass.distance` |
| glonass_engine_time | float | `glonass.engineTime` |
| **extracted_request_number** | int | –ò–∑–≤–ª–µ—á–µ–Ω–æ –∏–∑ `orderDescr` |

#### 4.2.3 extraction_log.json

–õ–æ–≥ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –Ω–æ–º–µ—Ä–æ–≤ –∑–∞—è–≤–æ–∫.

```json
{
  "total_calcs": 2341,
  "successful_extractions": 2250,
  "failed_extractions": 91,
  "failures": [
    {
      "pl_id": "–ê123–ë–í_2026-01-15",
      "order_descr": "–ë–µ–∑ –Ω–æ–º–µ—Ä–∞ –∑–∞—è–≤–∫–∏",
      "reason": "No digits found"
    },
    ...
  ]
}
```

### 4.3 –í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

#### 4.3.1 matched_output.csv

–ò—Ç–æ–≥–æ–≤–∞—è –ø–ª–æ—Å–∫–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å —Ç—Ä–µ–º—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ –∑–∞–ø–∏—Å–µ–π:

**–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–∞–Ω–Ω—ã—Ö:**

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ | match_status |
|-----------|----------|--------------|
| Matched | –ó–∞—è–≤–∫–∞ + —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –ü–õ | `"matched"` |
| Request only | –ó–∞—è–≤–∫–∞ –±–µ–∑ –ü–õ | `"request_only"` |
| PL only | –ü–õ –±–µ–∑ –∑–∞—è–≤–∫–∏ | `"pl_only"` |

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã:**

| –ö–æ–ª–æ–Ω–∫–∞ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|-----|----------|
| match_status | str | –ö–∞—Ç–µ–≥–æ—Ä–∏—è: matched / request_only / pl_only |
| request_number | int | –ù–æ–º–µ—Ä –∑–∞—è–≤–∫–∏ |
| request_status | str | –°—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏ |
| request_date_processed | str | –î–∞—Ç–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ |
| order_name_cargo | str | –ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –≥—Ä—É–∑–∞ |
| order_weight_cargo | float | –í–µ—Å –≥—Ä—É–∑–∞ |
| order_volume_cargo | float | –û–±—ä—ë–º –≥—Ä—É–∑–∞ |
| order_count_ts | int | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¢–° |
| route_start_address | str | –ê–¥—Ä–µ—Å –Ω–∞—á–∞–ª–∞ –º–∞—Ä—à—Ä—É—Ç–∞ |
| route_end_address | str | –ê–¥—Ä–µ—Å –∫–æ–Ω—Ü–∞ –º–∞—Ä—à—Ä—É—Ç–∞ |
| route_distance | float | –î–∏—Å—Ç–∞–Ω—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–∞ |
| route_time | float | –í—Ä–µ–º—è –º–∞—Ä—à—Ä—É—Ç–∞ |
| object_expend_code | str | –ö–æ–¥ –æ–±—ä–µ–∫—Ç–∞ –∑–∞—Ç—Ä–∞—Ç (–∑–∞—è–≤–∫–∞) |
| object_expend_name | str | –ù–∞–∑–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –∑–∞—Ç—Ä–∞—Ç (–∑–∞—è–≤–∫–∞) |
| pl_id | str | ID –ø—É—Ç–µ–≤–æ–≥–æ –ª–∏—Å—Ç–∞ |
| pl_ts_number | str | –ù–æ–º–µ—Ä –¢–° |
| pl_date_out | str | –î–∞—Ç–∞ –≤—ã–µ–∑–¥–∞ |
| pl_status | str | –°—Ç–∞—Ç—É—Å –ü–õ |
| pl_close_list | bool | –ó–∞–∫—Ä—ã—Ç –ª–∏ –ü–õ |
| calc_order_descr | str | –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ |
| calc_total_clock | float | –û–±—â–µ–µ –≤—Ä–µ–º—è |
| calc_idle_clock | float | –í—Ä–µ–º—è –ø—Ä–æ—Å—Ç–æ—è |
| calc_object_expend | str | –û–±—ä–µ–∫—Ç –∑–∞—Ç—Ä–∞—Ç (–ü–õ) |
| calc_route_distance | float | –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –ø–æ –º–∞—Ä—à—Ä—É—Ç—É |
| calc_route_time | float | –í—Ä–µ–º—è –ø–æ –º–∞—Ä—à—Ä—É—Ç—É |
| glonass_distance | float | –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –ø–æ –ì–õ–û–ù–ê–°–° |
| glonass_engine_time | float | –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –¥–≤–∏–≥–∞—Ç–µ–ª—è |

**–õ–æ–≥–∏–∫–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è:**

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ü–æ–ª—è Request | –ü–æ–ª—è PL |
|-----------|--------------|---------|
| matched | –ó–∞–ø–æ–ª–Ω–µ–Ω—ã | –ó–∞–ø–æ–ª–Ω–µ–Ω—ã |
| request_only | –ó–∞–ø–æ–ª–Ω–µ–Ω—ã | –ü—É—Å—Ç—ã–µ (null) |
| pl_only | –ü—É—Å—Ç—ã–µ (null) | –ó–∞–ø–æ–ª–Ω–µ–Ω—ã |

---

## 5. –ê–õ–ì–û–†–ò–¢–ú–´

### 5.1 –ê–ª–≥–æ—Ä–∏—Ç–º –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –Ω–æ–º–µ—Ä–∞ –∑–∞—è–≤–∫–∏

```python
def extract_request_number(order_descr: str) -> int | None:
    """
    –ò–∑–≤–ª–µ–∫–∞–µ—Ç –Ω–æ–º–µ—Ä –∑–∞—è–≤–∫–∏ –∏–∑ —Å—Ç—Ä–æ–∫–∏ orderDescr.

    –ü—Ä–∞–≤–∏–ª–æ: –≤—Å–µ —Ü–∏—Ñ—Ä—ã –ø–æ—Å–ª–µ –Ω–∞—á–∞–ª–∞, –ø–æ–∫–∞ –Ω–µ –≤—Å—Ç—Ä–µ—Ç–∏–º "/" –∏–ª–∏ –ø—Ä–æ–±–µ–ª

    –ü—Ä–∏–º–µ—Ä—ã:
        "‚Ññ120360/1 –æ—Ç 31.12.2025..." ‚Üí 120360
        "120360/1" ‚Üí 120360
        "‚Ññ 120360/1" ‚Üí 120360
        "–ë–µ–∑ –Ω–æ–º–µ—Ä–∞" ‚Üí None
        "" ‚Üí None
        None ‚Üí None
    """
    if not order_descr:
        return None

    # –£–±–∏—Ä–∞–µ–º —Å–∏–º–≤–æ–ª ‚Ññ –∏ –Ω–∞—á–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–µ–ª—ã
    cleaned = order_descr.lstrip('‚Ññ').lstrip()

    # –ò—â–µ–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ü–∏—Ñ—Ä –¥–æ "/" –∏–ª–∏ –ø—Ä–æ–±–µ–ª–∞
    match = re.match(r'^(\d+)', cleaned)

    if match:
        return int(match.group(1))

    return None
```

### 5.2 –ê–ª–≥–æ—Ä–∏—Ç–º –º—ç—Ç—á–∏–Ω–≥–∞

```
–í–•–û–î:
  - requests_parsed: DataFrame —Å –∑–∞—è–≤–∫–∞–º–∏
  - pl_parsed: DataFrame —Å calcs (–≤–∫–ª—é—á–∞—è extracted_request_number)

–ê–õ–ì–û–†–ò–¢–ú:
  1. –°–æ–∑–¥–∞—Ç—å —Å–ª–æ–≤–∞—Ä—å requests_dict: {request_number ‚Üí request_row}
  2. –°–æ–∑–¥–∞—Ç—å —Å–ª–æ–≤–∞—Ä—å calcs_by_request: {request_number ‚Üí [calc_rows]}

  3. –î–ª—è –∫–∞–∂–¥–æ–≥–æ request –≤ requests_parsed:
     a. –ï—Å–ª–∏ request_number –µ—Å—Ç—å –≤ calcs_by_request:
        - –î–ª—è –∫–∞–∂–¥–æ–≥–æ calc: —Å–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–æ–∫—É (matched, request_data, calc_data)
     b. –ò–Ω–∞—á–µ:
        - –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–æ–∫—É (request_only, request_data, null)

  4. –î–ª—è –∫–∞–∂–¥–æ–≥–æ calc –≤ pl_parsed:
     a. –ï—Å–ª–∏ extracted_request_number –ù–ï –≤ requests_dict:
        - –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–æ–∫—É (pl_only, null, calc_data)

–í–´–•–û–î:
  - matched_output: DataFrame —Å —Ç—Ä–µ–º—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
```

### 5.3 –ü–∞–π–ø–ª–∞–π–Ω –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ STAGE 1: –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤                               ‚îÇ
‚îÇ - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤                                 ‚îÇ
‚îÇ - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã JSON (–Ω–∞–ª–∏—á–∏–µ –∫–ª—é—á–∞ "list")               ‚îÇ
‚îÇ - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö                                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚îÇ
                              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ STAGE 2: –ü–∞—Ä—Å–∏–Ω–≥ Requests                                       ‚îÇ
‚îÇ - –ó–∞–≥—Ä—É–∑–∫–∞ Requests_raw.json                                    ‚îÇ
‚îÇ - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–æ–ª–µ–π —Å–æ–≥–ª–∞—Å–Ω–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏                        ‚îÇ
‚îÇ - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ requests_parsed.csv                                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚îÇ
                              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ STAGE 3: –ü–∞—Ä—Å–∏–Ω–≥ PL (calcs)                                     ‚îÇ
‚îÇ - –ó–∞–≥—Ä—É–∑–∫–∞ PL_raw.json                                          ‚îÇ
‚îÇ - –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ calcs (–æ–¥–∏–Ω –ü–õ ‚Üí –º–Ω–æ–≥–æ —Å—Ç—Ä–æ–∫)                   ‚îÇ
‚îÇ - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ pl_parsed.csv                                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚îÇ
                              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ STAGE 4: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–æ–≤ –∑–∞—è–≤–æ–∫                              ‚îÇ
‚îÇ - –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ extract_request_number() –∫ –∫–∞–∂–¥–æ–º—É calc            ‚îÇ
‚îÇ - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –∏–∑–≤–ª–µ—á–µ–Ω–∏–π                              ‚îÇ
‚îÇ - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ extraction_log.json                                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚îÇ
                              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ STAGE 5: –ú—ç—Ç—á–∏–Ω–≥                                                ‚îÇ
‚îÇ - –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ request.number ‚Üî extracted_request_number       ‚îÇ
‚îÇ - –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä—ë—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π (matched, request_only, pl_only)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚îÇ
                              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ STAGE 6: –≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤                                    ‚îÇ
‚îÇ - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ matched_output.csv                                 ‚îÇ
‚îÇ - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏—Ç–æ–≥–æ–≤–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏                                 ‚îÇ
‚îÇ - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–≥–æ–≤                                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## 6. –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø

### 6.1 –§–∞–π–ª config.yaml

```yaml
# ============================================================
# Transport Analytics Configuration
# ============================================================

# –ü—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º
paths:
  input:
    requests: "Data/raw/Requests_raw.json"
    pl: "Data/raw/PL_raw.json"
  output:
    intermediate: "Data/intermediate/"
    final: "Data/final/"
    logs: "Data/logs/"

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞
parsing:
  # –ï—Å–ª–∏ true - –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º—Å—è –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
  # –ï—Å–ª–∏ false - –ª–æ–≥–∏—Ä—É–µ–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º
  fail_on_missing_fields: false

  # –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –ø–æ–ª—è—Ö
  log_warnings: true

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –Ω–æ–º–µ—Ä–∞ –∑–∞—è–≤–∫–∏
extraction:
  # –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é,
  # –Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–µ—Ç –ª–æ–≥–∏–∫—É)
  pattern_description: "–¶–∏—Ñ—Ä—ã –æ—Ç –Ω–∞—á–∞–ª–∞ —Å—Ç—Ä–æ–∫–∏ –¥–æ '/' –∏–ª–∏ –ø—Ä–æ–±–µ–ª–∞"

  # –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—É—Ñ—Ñ–∏–∫—Å /1, /2 –∏ —Ç.–¥.
  ignore_suffix: true

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging:
  # –£—Ä–æ–≤–µ–Ω—å: DEBUG, INFO, WARNING, ERROR
  level: "INFO"

  # –í—ã–≤–æ–¥–∏—Ç—å –≤ –∫–æ–Ω—Å–æ–ª—å
  console: true

  # –°–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ —Ñ–∞–π–ª
  file: true

  # –§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞ –ª–æ–≥–∞
  file_format: "pipeline_{date}.log"
```

---

## 7. –õ–û–ì–ò–†–û–í–ê–ù–ò–ï –ò –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê

### 7.1 –§–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤

```
=== TRANSPORT ANALYTICS PIPELINE ===
Started: 2026-01-26 14:30:00

[STAGE 1] Validating input files...
  ‚úì Requests_raw.json: valid, 1,450 records
  ‚úì PL_raw.json: valid, 820 route lists, 2,341 calcs

[STAGE 2] Parsing Requests...
  ‚úì Parsed 1,450 requests
  ‚ö† Warnings: 12 requests with missing fields (logged)

[STAGE 3] Parsing PL (calcs)...
  ‚úì Parsed 2,341 calcs from 820 route lists
  ‚ö† Warnings: 45 calcs with empty orderDescr

[STAGE 4] Extracting request numbers from orderDescr...
  ‚úì Extracted 2,250 request numbers (96.1%)
  ‚úó Failed to extract: 91 calcs (3.9%)

[STAGE 5] Matching requests ‚Üî calcs...
  ‚úì Matched: 2,180 pairs
  ‚ö† Requests without PL: 320 (22.1%)
  ‚ö† PL without requests: 70 (3.0%)

[STAGE 6] Generating output...
  ‚úì Saved: Data/final/matched_output.csv
    - matched: 2,180 rows
    - request_only: 320 rows
    - pl_only: 70 rows
    - TOTAL: 2,570 rows

=== SUMMARY ===
Total requests: 1,450
Total calcs: 2,341
Matched pairs: 2,180
Requests without PL: 320
PL without requests: 70
Execution time: 12.3s

=== WARNINGS (58) ===
  - 12 requests with missing 'orders' field
  - 45 calcs with empty 'orderDescr' field
  - 1 calc with unparseable orderDescr: "invalid format"

=== ERRORS (0) ===
No critical errors.
```

### 7.2 –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

| –£—Ä–æ–≤–µ–Ω—å | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è |
|---------|-------------------|
| DEBUG | –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ –∫–∞–∂–¥–æ–π –∑–∞–ø–∏—Å–∏ (–æ—Ç–∫–ª—é—á–µ–Ω–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) |
| INFO | –ö–ª—é—á–µ–≤—ã–µ —ç—Ç–∞–ø—ã, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –ø—Ä–æ–≥—Ä–µ—Å—Å |
| WARNING | –ü—Ä–æ–±–ª–µ–º—ã —Å –¥–∞–Ω–Ω—ã–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ |
| ERROR | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ (–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ñ–∞–π–ª–∞, –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON) |

---

## 8. –û–ë–†–ê–ë–û–¢–ö–ê –û–®–ò–ë–û–ö

### 8.1 –°—Ç—Ä–∞—Ç–µ–≥–∏—è: Hybrid

| –¢–∏–ø –æ—à–∏–±–∫–∏ | –î–µ–π—Å—Ç–≤–∏–µ |
|------------|----------|
| –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ | STOP: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞, –ø–∞–π–ø–ª–∞–π–Ω –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è |
| –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON | STOP: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ |
| –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–ª—é—á–∞ "list" | STOP: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ |
| –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ–ª—è –≤ –∑–∞–ø–∏—Å–∏ | CONTINUE: –õ–æ–≥–∏—Ä—É–µ–º WARNING, –ø–æ–ª–µ = null |
| –ü—É—Å—Ç–æ–π orderDescr | CONTINUE: –õ–æ–≥–∏—Ä—É–µ–º WARNING, calc –±–µ–∑ –Ω–æ–º–µ—Ä–∞ |
| –ù–µ–∏–∑–≤–ª–µ–∫–∞–µ–º—ã–π –Ω–æ–º–µ—Ä –∑–∞—è–≤–∫–∏ | CONTINUE: –õ–æ–≥–∏—Ä—É–µ–º WARNING, —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ extraction_log |

### 8.2 –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

```python
def validate_input_file(filepath: str, required_key: str = "list") -> ValidationResult:
    """
    –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Ö–æ–¥–Ω–æ–π JSON —Ñ–∞–π–ª.

    –ü—Ä–æ–≤–µ—Ä–∫–∏:
    1. –§–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
    2. –§–∞–π–ª —á–∏—Ç–∞–µ—Ç—Å—è –∫–∞–∫ JSON
    3. JSON —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–ª—é—á required_key
    4. –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ –∫–ª—é—á—É ‚Äî —Å–ø–∏—Å–æ–∫
    5. –°–ø–∏—Å–æ–∫ –Ω–µ –ø—É—Å—Ç–æ–π

    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
    - is_valid: bool
    - record_count: int
    - errors: list[str]
    """
```

---

## 9. –ó–ê–í–ò–°–ò–ú–û–°–¢–ò

### 9.1 requirements.txt

```
pandas>=2.0.0
pyyaml>=6.0.0
```

### 9.2 –í–µ—Ä—Å–∏—è Python

- –ú–∏–Ω–∏–º—É–º: Python 3.10+
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: Python 3.11+

---

## 10. –ò–ù–°–¢–†–£–ö–¶–ò–Ø –î–õ–Ø –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ï–ô

### 10.1 –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (–±—É–¥–µ—Ç –≤ README.md)

```markdown
## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –¥–∞–Ω–Ω—ã–µ
–ü–æ–ª–æ–∂–∏—Ç–µ –≤–∞—à–∏ —Ñ–∞–π–ª—ã –≤ –ø–∞–ø–∫—É `Data/raw/`:
- `Requests_raw.json` ‚Äî —Ñ–∞–π–ª —Å –∑–∞—è–≤–∫–∞–º–∏
- `PL_raw.json` ‚Äî —Ñ–∞–π–ª —Å –ø—É—Ç–µ–≤—ã–º–∏ –ª–∏—Å—Ç–∞–º–∏

### –®–∞–≥ 2: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É

**Windows:**
–î–≤–∞–∂–¥—ã –∫–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ —Ñ–∞–π–ª `run.bat`

**Mac/Linux:**
–û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –≤ –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
./run.sh

### –®–∞–≥ 3: –ü–æ–ª—É—á–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
–†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—è–≤–∏—Ç—Å—è –≤ –ø–∞–ø–∫–µ `Data/final/`:
- `matched_output.csv` ‚Äî —Ç–∞–±–ª–∏—Ü–∞ —Å —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

–õ–æ–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: `Data/logs/pipeline.log`
```

---

## 11. –§–ê–ô–õ–´ –î–õ–Ø –ê–†–•–ò–í–ò–†–û–í–ê–ù–ò–Ø

–°–ª–µ–¥—É—é—â–∏–µ —Ñ–∞–π–ª—ã –ø–µ—Ä–µ–Ω–æ—Å—è—Ç—Å—è –≤ –ø–∞–ø–∫—É `archive/`:

### 11.1 –ò–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞

| –§–∞–π–ª | –ü—Ä–∏—á–∏–Ω–∞ |
|------|---------|
| `MO-index1.json` | –£—Å—Ç–∞—Ä–µ–≤—à–∏–π –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π —Ñ–∞–π–ª |
| `Table1.sql` | –£—Å—Ç–∞—Ä–µ–≤—à–∏–π SQL —Å–∫—Ä–∏–ø—Ç |

### 11.2 –ò–∑ Data/Raw/

| –§–∞–π–ª | –ü—Ä–∏—á–∏–Ω–∞ |
|------|---------|
| `xdd.py` | –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç |
| `merge_requests_pl.py` | –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è –º—ç—Ç—á–µ—Ä–∞ |
| `debug_requests_json.py` | –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç |
| `sdfas.txt` | –í—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª |

### 11.3 –ò–∑ Data/Processed/

| –§–∞–π–ª | –ü—Ä–∏—á–∏–Ω–∞ |
|------|---------|
| `*.csv` | –°—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã |

### 11.4 –ò–∑ Data/Parsed/

| –§–∞–π–ª | –ü—Ä–∏—á–∏–Ω–∞ |
|------|---------|
| `parsed_requests.csv` | –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞ |

### 11.5 –ò–∑ Scripts/

| –§–∞–π–ª | –ü—Ä–∏—á–∏–Ω–∞ |
|------|---------|
| `*.py`, `*.ipynb` | –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ —Å–∫—Ä–∏–ø—Ç—ã –ø–µ—Ä–≤—ã—Ö —ç—Ç–∞–ø–æ–≤ |

### 11.6 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ archive/

```
archive/
‚îú‚îÄ‚îÄ scripts/           # –í—Å–µ .py –∏ .ipynb –∏–∑ Scripts/
‚îú‚îÄ‚îÄ processed/         # –í—Å–µ –∏–∑ Data/Processed/
‚îú‚îÄ‚îÄ parsed/            # –í—Å–µ –∏–∑ Data/Parsed/
‚îú‚îÄ‚îÄ raw_utils/         # –°–∫—Ä–∏–ø—Ç—ã –∏–∑ Data/Raw/
‚îî‚îÄ‚îÄ other/             # MO-index1.json, Table1.sql –∏ –ø—Ä–æ—á–µ–µ
```

---

## 12. –ü–õ–ê–ù –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
- [ ] –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
- [ ] –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ —Ñ–∞–π–ª—ã –≤ archive/
- [ ] –°–æ–∑–¥–∞—Ç—å config.yaml
- [ ] –°–æ–∑–¥–∞—Ç—å requirements.txt

### –≠—Ç–∞–ø 2: –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å src/utils/logger.py
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å src/utils/validators.py
- [ ] –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–π main.py

### –≠—Ç–∞–ø 3: –ü–∞—Ä—Å–µ—Ä—ã
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å src/parsers/request_parser.py
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å src/parsers/pl_parser.py
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å src/utils/extractors.py

### –≠—Ç–∞–ø 4: –ú—ç—Ç—á–∏–Ω–≥
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å src/matchers/request_pl_matcher.py
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å src/pipeline.py

### –≠—Ç–∞–ø 5: –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è
- [ ] –°–æ–∑–¥–∞—Ç—å run.bat –∏ run.sh
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å README.md
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

## 13. –ö–†–ò–¢–ï–†–ò–ò –ü–†–ò–Å–ú–ö–ò

### 13.1 –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏

| ‚Ññ | –ö—Ä–∏—Ç–µ—Ä–∏–π | –ü—Ä–æ–≤–µ—Ä–∫–∞ |
|---|----------|----------|
| 1 | –ü–∞–π–ø–ª–∞–π–Ω –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç Requests_raw.json –±–µ–∑ –æ—à–∏–±–æ–∫ | –£—Å–ø–µ—à–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ |
| 2 | –ü–∞–π–ø–ª–∞–π–Ω –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç PL_raw.json –±–µ–∑ –æ—à–∏–±–æ–∫ | –£—Å–ø–µ—à–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ |
| 3 | –ù–æ–º–µ—Ä –∑–∞—è–≤–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –∏–∑ orderDescr | –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ 10 –∑–∞–ø–∏—Å–µ–π |
| 4 | –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ –Ω–æ–º–µ—Ä—É –∑–∞—è–≤–∫–∏ | –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ 10 –∑–∞–ø–∏—Å–µ–π |
| 5 | –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è matched_output.csv —Å —Ç—Ä–µ–º—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ | –§–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–µ—Ä–Ω–∞ |
| 6 | –õ–æ–≥–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É | –õ–æ–≥-—Ñ–∞–π–ª —á–∏—Ç–∞–µ–º –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–µ–Ω |

### 13.2 –ù–µ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏

| ‚Ññ | –ö—Ä–∏—Ç–µ—Ä–∏–π | –ü—Ä–æ–≤–µ—Ä–∫–∞ |
|---|----------|----------|
| 1 | –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è < 60 —Å–µ–∫—É–Ω–¥ –¥–ª—è 3000 requests + 2000 PL | –ó–∞–º–µ—Ä –≤—Ä–µ–º–µ–Ω–∏ |
| 2 | –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ run.bat/run.sh —Ä–∞–±–æ—Ç–∞–µ—Ç | –¢–µ—Å—Ç –Ω–∞ —á–∏—Å—Ç–æ–π –º–∞—à–∏–Ω–µ |
| 3 | README –ø–æ–Ω—è—Ç–µ–Ω –¥–ª—è –Ω–µ—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ | –†–µ–≤—å—é —á–µ–ª–æ–≤–µ–∫–æ–º –±–µ–∑ IT-–±—ç–∫–≥—Ä–∞—É–Ω–¥–∞ |

---

## 14. –ì–õ–û–°–°–ê–†–ò–ô

| –¢–µ—Ä–º–∏–Ω | –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ |
|--------|-------------|
| **Request** | –ó–∞—è–≤–∫–∞ –Ω–∞ –ø–µ—Ä–µ–≤–æ–∑–∫—É –∏–∑ —Å–∏—Å—Ç–µ–º—ã Requests |
| **PL (Route List)** | –ü—É—Ç–µ–≤–æ–π –ª–∏—Å—Ç |
| **calc** | –†–∞—Å—á—ë—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å –≤–Ω—É—Ç—Ä–∏ –ø—É—Ç–µ–≤–æ–≥–æ –ª–∏—Å—Ç–∞, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–¥–Ω–æ–π –∑–∞—è–≤–∫–µ |
| **orderDescr** | –¢–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ –≤ calc, —Å–æ–¥–µ—Ä–∂–∞—â–µ–µ –Ω–æ–º–µ—Ä –∑–∞—è–≤–∫–∏ |
| **Matched** | –ó–∞—è–≤–∫–∞, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–π –Ω–∞–π–¥–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π calc |
| **Request only** | –ó–∞—è–≤–∫–∞ –±–µ–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –ø—É—Ç–µ–≤–æ–≥–æ –ª–∏—Å—Ç–∞ |
| **PL only** | –ü—É—Ç–µ–≤–æ–π –ª–∏—Å—Ç –±–µ–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –∑–∞—è–≤–∫–∏ |

---

## 15. –ò–°–¢–û–†–ò–Ø –ò–ó–ú–ï–ù–ï–ù–ò–ô

| –í–µ—Ä—Å–∏—è | –î–∞—Ç–∞ | –ê–≤—Ç–æ—Ä | –ò–∑–º–µ–Ω–µ–Ω–∏—è |
|--------|------|-------|-----------|
| 1.0 | 2026-01-26 | ‚Äî | –ü–µ—Ä–≤–∞—è –≤–µ—Ä—Å–∏—è –¢–ó |

---

**–°—Ç–∞—Ç—É—Å –¥–æ–∫—É–º–µ–Ω—Ç–∞:** –ù–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–∏

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ü–æ—Å–ª–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è –¢–ó ‚Äî –Ω–∞—á–∞–ª–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (–≠—Ç–∞–ø 1)
